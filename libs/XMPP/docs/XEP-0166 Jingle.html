<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<!-- saved from url=(0040)http://xmpp.org/extensions/xep-0166.html -->
<HTML 
xmlns="http://www.w3.org/1999/xhtml"><HEAD><TITLE>XEP-0166: Jingle</TITLE>
<META content="text/html; charset=UTF-8" http-equiv=Content-Type><LINK 
rel=stylesheet type=text/css href="XEP-0166%20Jingle_files/xmpp.css"><LINK 
rel=stylesheet type=text/css href="XEP-0166%20Jingle_files/prettify.css"><LINK 
rel="shortcut icon" type=image/x-icon href="/favicon.ico">
<SCRIPT type=text/javascript src="XEP-0166%20Jingle_files/prettify.js"></SCRIPT>

<META name=DC.Title content=Jingle>
<META name=DC.Creator content="Scott Ludwig">
<META name=DC.Creator content="Joe Beda">
<META name=DC.Creator content="Peter Saint-Andre">
<META name=DC.Creator content="Robert McQueen">
<META name=DC.Creator content="Sean Egan">
<META name=DC.Creator content="Joe Hildebrand">
<META name=DC.Description 
content="This specification defines an XMPP protocol extension for initiating and managing peer-to-peer media sessions between two XMPP entities in a way that is interoperable with existing Internet standards. The protocol provides a pluggable model that enables the core session management semantics (compatible with SIP) to be used for a wide variety of application types (e.g., voice chat, video chat, file transfer) and with a wide variety of transport methods (e.g., TCP, UDP, ICE, application-specific transports).">
<META name=DC.Publisher content="XMPP Standards Foundation">
<META name=DC.Contributor content="XMPP Extensions Editor">
<META name=DC.Date content=2009-12-23>
<META name=DC.Type content="XMPP Extension Protocol">
<META name=DC.Format content=XHTML>
<META name=DC.Identifier content=XEP-0166>
<META name=DC.Language content=en>
<META name=DC.Rights 
content="This XMPP Extension Protocol is copyright © 1999 - 2010 by the XMPP Standards Foundation (XSF).">
<META name=GENERATOR content="MSHTML 8.00.7600.16385"></HEAD>
<BODY onload=prettyPrint()>
<H1>XEP-0166: Jingle</H1>
<TABLE>
  <TBODY>
  <TR vAlign=top>
    <TD><STRONG>Abstract:</STRONG></TD>
    <TD>This specification defines an XMPP protocol extension for initiating 
      and managing peer-to-peer media sessions between two XMPP entities in a 
      way that is interoperable with existing Internet standards. The protocol 
      provides a pluggable model that enables the core session management 
      semantics (compatible with SIP) to be used for a wide variety of 
      application types (e.g., voice chat, video chat, file transfer) and with a 
      wide variety of transport methods (e.g., TCP, UDP, ICE, 
      application-specific transports).</TD></TR>
  <TR vAlign=top>
    <TD><STRONG>Authors:</STRONG></TD>
    <TD>Scott Ludwig, Joe Beda, Peter Saint-Andre, Robert McQueen, Sean Egan, 
      Joe Hildebrand</TD></TR>
  <TR vAlign=top>
    <TD><STRONG>Copyright:</STRONG></TD>
    <TD>© 1999 - 2010 XMPP Standards Foundation. <A 
      href="http://xmpp.org/extensions/xep-0166.html#appendix-legal">SEE LEGAL 
      NOTICES</A>.</TD></TR>
  <TR vAlign=top>
    <TD><STRONG>Status:</STRONG></TD>
    <TD>Draft</TD></TR>
  <TR vAlign=top>
    <TD><STRONG>Type:</STRONG></TD>
    <TD>Standards Track</TD></TR>
  <TR vAlign=top>
    <TD><STRONG>Version:</STRONG></TD>
    <TD>1.1</TD></TR>
  <TR vAlign=top>
    <TD><STRONG>Last&nbsp;Updated:</STRONG></TD>
    <TD>2009-12-23</TD></TR></TBODY></TABLE>
<HR>

<P style="COLOR: green">NOTICE: The protocol defined herein is a <STRONG>Draft 
Standard</STRONG> of the XMPP Standards Foundation. Implementations are 
encouraged and the protocol is appropriate for deployment in production systems, 
but some changes to the protocol are possible before it becomes a Final 
Standard.</P>
<HR>

<H2>Table of Contents</H2>
<DIV class=indent>
<P><BR>1. <A 
href="http://xmpp.org/extensions/xep-0166.html#intro">Introduction</A><BR>2. <A 
href="http://xmpp.org/extensions/xep-0166.html#howitworks">How It 
Works</A><BR>3. <A 
href="http://xmpp.org/extensions/xep-0166.html#reqs">Requirements</A><BR>4. <A 
href="http://xmpp.org/extensions/xep-0166.html#terms">Terminology</A><BR>&nbsp;&nbsp;&nbsp; 
4.1. <A 
href="http://xmpp.org/extensions/xep-0166.html#terms-glossary">Glossary</A><BR>&nbsp;&nbsp;&nbsp; 
4.2. <A 
href="http://xmpp.org/extensions/xep-0166.html#terms-conventions">Conventions</A><BR>5. 
<A href="http://xmpp.org/extensions/xep-0166.html#concepts">Concepts and 
Approach</A><BR>&nbsp;&nbsp;&nbsp; 5.1. <A 
href="http://xmpp.org/extensions/xep-0166.html#concepts-session">Overall Session 
Management</A><BR>6. <A 
href="http://xmpp.org/extensions/xep-0166.html#session">Session 
Flow</A><BR>&nbsp;&nbsp;&nbsp; 6.1. <A 
href="http://xmpp.org/extensions/xep-0166.html#session-resource">Resource 
Determination</A><BR>&nbsp;&nbsp;&nbsp; 6.2. <A 
href="http://xmpp.org/extensions/xep-0166.html#protocol-initiate">Initiation</A><BR>&nbsp;&nbsp;&nbsp; 
6.3. <A 
href="http://xmpp.org/extensions/xep-0166.html#protocol-response">Responder 
Response</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6.3.1. <A 
href="http://xmpp.org/extensions/xep-0166.html#protocol-response-ack">Acknowledgement</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
6.3.2. <A 
href="http://xmpp.org/extensions/xep-0166.html#protocol-response-errors">Errors</A><BR>&nbsp;&nbsp;&nbsp; 
6.4. <A 
href="http://xmpp.org/extensions/xep-0166.html#session-negotiation">Negotiation</A><BR>&nbsp;&nbsp;&nbsp; 
6.5. <A 
href="http://xmpp.org/extensions/xep-0166.html#session-acceptance">Acceptance</A><BR>&nbsp;&nbsp;&nbsp; 
6.6. <A href="http://xmpp.org/extensions/xep-0166.html#session-modify">Modifying 
an Active Session</A><BR>&nbsp;&nbsp;&nbsp; 6.7. <A 
href="http://xmpp.org/extensions/xep-0166.html#session-terminate">Termination</A><BR>&nbsp;&nbsp;&nbsp; 
6.8. <A 
href="http://xmpp.org/extensions/xep-0166.html#session-info">Informational 
Messages</A><BR>7. <A href="http://xmpp.org/extensions/xep-0166.html#def">Formal 
Definition</A><BR>&nbsp;&nbsp;&nbsp; 7.1. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-jingle">Jingle 
Element</A><BR>&nbsp;&nbsp;&nbsp; 7.2. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action">Action 
Attribute</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7.2.1. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-content-accept">content-accept</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.2. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-content-add">content-add</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.3. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-content-modify">content-modify</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.4. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-content-reject">content-reject</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.5. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-content-remove">content-remove</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.6. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-description-info">description-info</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.7. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-security-info">security-info</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.8. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-session-accept">session-accept</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.9. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-session-info">session-info</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.10. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-session-initiate">session-initiate</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.11. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-session-terminate">session-terminate</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.12. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-transport-accept">transport-accept</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.13. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-transport-info">transport-info</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.14. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-transport-reject">transport-reject</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.15. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action-transport-replace">transport-replace</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
7.2.16. <A href="http://xmpp.org/extensions/xep-0166.html#def-action-ties">Tie 
Breaking Related to Jingle Actions</A><BR>&nbsp;&nbsp;&nbsp; 7.3. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-content">Content 
Element</A><BR>&nbsp;&nbsp;&nbsp; 7.4. <A 
href="http://xmpp.org/extensions/xep-0166.html#def-reason">Reason 
Element</A><BR>8. <A 
href="http://xmpp.org/extensions/xep-0166.html#transports">Transport 
Types</A><BR>&nbsp;&nbsp;&nbsp; 8.1. <A 
href="http://xmpp.org/extensions/xep-0166.html#transports-datagram">Datagram</A><BR>&nbsp;&nbsp;&nbsp; 
8.2. <A 
href="http://xmpp.org/extensions/xep-0166.html#transports-streaming">Streaming</A><BR>9. 
<A href="http://xmpp.org/extensions/xep-0166.html#preconditions">Security 
Preconditions</A><BR>10. <A 
href="http://xmpp.org/extensions/xep-0166.html#errors">Error Handling</A><BR>11. 
<A href="http://xmpp.org/extensions/xep-0166.html#support">Determining 
Support</A><BR>12. <A 
href="http://xmpp.org/extensions/xep-0166.html#conformance">Conformance by Using 
Protocols</A><BR>&nbsp;&nbsp;&nbsp; 12.1. <A 
href="http://xmpp.org/extensions/xep-0166.html#conformance-apps">Application 
Formats</A><BR>&nbsp;&nbsp;&nbsp; 12.2. <A 
href="http://xmpp.org/extensions/xep-0166.html#conformance-transports">Transport 
Methods</A><BR>&nbsp;&nbsp;&nbsp; 12.3. <A 
href="http://xmpp.org/extensions/xep-0166.html#conformance-preconditions">Security 
Preconditions</A><BR>13. <A 
href="http://xmpp.org/extensions/xep-0166.html#security">Security 
Considerations</A><BR>&nbsp;&nbsp;&nbsp; 13.1. <A 
href="http://xmpp.org/extensions/xep-0166.html#security-transport">Transport 
Security</A><BR>&nbsp;&nbsp;&nbsp; 13.2. <A 
href="http://xmpp.org/extensions/xep-0166.html#security-dos">Denial of 
Service</A><BR>&nbsp;&nbsp;&nbsp; 13.3. <A 
href="http://xmpp.org/extensions/xep-0166.html#security-gateways">Communication 
Through Gateways</A><BR>&nbsp;&nbsp;&nbsp; 13.4. <A 
href="http://xmpp.org/extensions/xep-0166.html#security-info">Information 
Exposure</A><BR>&nbsp;&nbsp;&nbsp; 13.5. <A 
href="http://xmpp.org/extensions/xep-0166.html#security-redirect">Redirection</A><BR>14. 
<A href="http://xmpp.org/extensions/xep-0166.html#iana">IANA 
Considerations</A><BR>15. <A 
href="http://xmpp.org/extensions/xep-0166.html#registrar">XMPP Registrar 
Considerations</A><BR>&nbsp;&nbsp;&nbsp; 15.1. <A 
href="http://xmpp.org/extensions/xep-0166.html#registrar-ns">Protocol 
Namespaces</A><BR>&nbsp;&nbsp;&nbsp; 15.2. <A 
href="http://xmpp.org/extensions/xep-0166.html#registrar-versioning">Namespace 
Versioning</A><BR>&nbsp;&nbsp;&nbsp; 15.3. <A 
href="http://xmpp.org/extensions/xep-0166.html#registrar-apps">Jingle 
Application Formats Registry</A><BR>&nbsp;&nbsp;&nbsp; 15.4. <A 
href="http://xmpp.org/extensions/xep-0166.html#registrar-transports">Jingle 
Transport Methods Registry</A><BR>16. <A 
href="http://xmpp.org/extensions/xep-0166.html#schema">XML 
Schemas</A><BR>&nbsp;&nbsp;&nbsp; 16.1. <A 
href="http://xmpp.org/extensions/xep-0166.html#schema-jingle">Jingle</A><BR>&nbsp;&nbsp;&nbsp; 
16.2. <A href="http://xmpp.org/extensions/xep-0166.html#schema-errors">Jingle 
Errors</A><BR>17. <A 
href="http://xmpp.org/extensions/xep-0166.html#history">History</A><BR>18. <A 
href="http://xmpp.org/extensions/xep-0166.html#ack">Acknowledgements</A></P>
<P><A 
href="http://xmpp.org/extensions/xep-0166.html#appendices">Appendices</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
href="http://xmpp.org/extensions/xep-0166.html#appendix-docinfo">A: Document 
Information</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
href="http://xmpp.org/extensions/xep-0166.html#appendix-authorinfo">B: Author 
Information</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
href="http://xmpp.org/extensions/xep-0166.html#appendix-legal">C: Legal 
Notices</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
href="http://xmpp.org/extensions/xep-0166.html#appendix-xmpp">D: Relation to 
XMPP</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
href="http://xmpp.org/extensions/xep-0166.html#appendix-discuss">E: Discussion 
Venue</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
href="http://xmpp.org/extensions/xep-0166.html#appendix-conformance">F: 
Requirements Conformance</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
href="http://xmpp.org/extensions/xep-0166.html#appendix-notes">G: 
Notes</A><BR>&nbsp;&nbsp;&nbsp;&nbsp;<A 
href="http://xmpp.org/extensions/xep-0166.html#appendix-revs">H: Revision 
History</A></P></DIV>
<HR>

<H2>1. <A id=intro name=intro>Introduction</A></H2>
<P>The purpose of Jingle is to enable one-to-one, peer-to-peer media sessions 
between XMPP entities, where the negotiation occurs over the XMPP signalling 
channel and the media is exchanged over a data channel that is usually a 
dedicated non-XMPP transport. Jingle is designed in a modular way:</P>
<UL>
  <LI>
  <P>Developers can easily plug in support for a wide variety of application 
  types, such as voice and video chat (see <SPAN class=ref><A 
  href="http://xmpp.org/extensions/xep-0167.html">Jingle RTP Sessions</A></SPAN> 
  [<A href="http://xmpp.org/extensions/xep-0166.html#nt-id343338">1</A>]), file 
  transfer (see <SPAN class=ref><A 
  href="http://xmpp.org/extensions/xep-0234.html">Jingle File 
  Transfer</A></SPAN> [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id343362">2</A>]), 
  application sharing, collaborative editing, whiteboarding, and secure 
  transmission of end-to-end XML streams (see <SPAN class=ref><A 
  href="http://xmpp.org/extensions/xep-0247.html">Jingle XML Streams</A></SPAN> 
  [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id343384">3</A>]).</P></LI>
  <LI>
  <P>The transport methods are also pluggable, so that Jingle implementations 
  can use any appropriate datagram transport such as User Datagram Protocol 
  (UDP; <SPAN class=ref><A href="http://tools.ietf.org/html/rfc0768">RFC 
  768</A></SPAN> [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id343406">4</A>]) as 
  negotiated via <SPAN class=ref><A 
  href="http://xmpp.org/extensions/xep-0177.html">Jingle Raw UDP Transport 
  Method </A></SPAN>[<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id343428">5</A>] or <SPAN 
  class=ref><A href="http://xmpp.org/extensions/xep-0176.html">Jingle ICE-UDP 
  Transport Method</A></SPAN> [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id343450">6</A>], or any 
  appropriate streaming transport such as Transmission Control Protocol (TCP; 
  <SPAN class=ref><A href="http://tools.ietf.org/html/rfc0793">RFC 
  793</A></SPAN> [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id343470">7</A>]), <SPAN 
  class=ref><A href="http://xmpp.org/extensions/xep-0065.html">SOCKS5 
  Bytestreams</A></SPAN> [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id343485">8</A>] as 
  negotiated via <SPAN class=ref><A 
  href="http://xmpp.org/extensions/xep-0260.html">Jingle SOCKS5 Bytestreams 
  Transport Method</A></SPAN> [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id343508">9</A>], and <SPAN 
  class=ref><A href="http://xmpp.org/extensions/xep-0047.html">In-Band 
  Bytestreams</A></SPAN> [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id343528">10</A>] as 
  negotiated via <SPAN class=ref><A 
  href="http://xmpp.org/extensions/xep-0261.html">Jingle In-Band Bytestreams 
  Transport Method</A></SPAN> [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id343545">11</A>].</P></LI>
  <LI>
  <P>This modular approach also extends to the security preconditions that need 
  to be met before application data can be exchanged over a given transport, 
  such as negotiation of Transport Layer Security (TLS; <SPAN class=ref><A 
  href="http://tools.ietf.org/html/rfc5246">RFC 5246</A></SPAN> [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id343573">12</A>]) for 
  streaming transports and negotiation of Datagram Transport Layer Security 
  (DTLS; <SPAN class=ref><A href="http://tools.ietf.org/html/rfc4347">RFC 
  4347</A></SPAN> [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id343593">13</A>]) for 
  datagram transports.</P></LI></UL>
<P>It is expected that most application types, transport methods, and security 
preconditions will be documented in specifications produced by the <SPAN 
class=ref><A href="http://xmpp.org/xsf/">XMPP Standards Foundation 
(XSF)</A></SPAN> [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id343615">14</A>] or the <SPAN 
class=ref><A href="http://www.ietf.org/">Internet Engineering Task Force 
(IETF)</A></SPAN> [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id343639">15</A>]; however, 
developers can also define proprietary methods for custom functionality.</P>
<P>Although Jingle provides a general framework for session management, the 
original target application for Jingle was simple voice and video chat. We 
stress the word "simple". The purpose of Jingle was not to build a full-fledged 
telephony application that supports call waiting, call forwarding, call 
transfer, hold music, IVR systems, find-me-follow-me functionality, conference 
calls, and the like. These features are of interest to some user populations, 
but adding support for them to the core Jingle layer would introduce unnecessary 
complexity into a technology that is designed for simple but generalized session 
negotiation.</P>
<P>Furthermore, Jingle is not intended to supplant or replace existing Internet 
technologies based on the Session Initiation Protocol (SIP; <SPAN class=ref><A 
href="http://tools.ietf.org/html/rfc3261">RFC 3261</A></SPAN> [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id343671">16</A>]). Because 
dual-stack XMPP+SIP clients are difficult to build, Jingle was designed as a 
pure XMPP signalling protocol. However, Jingle is at the same time designed to 
interwork with SIP so that the millions of deployed XMPP clients can be added 
onto existing Voice over Internet Protocol (VoIP) networks, rather than limiting 
XMPP users to a separate and distinct network.</P>
<H2>2. <A id=howitworks name=howitworks>How It Works</A></H2>
<P>This section provides a friendly introduction to Jingle.</P>
<P>In essence, Jingle enables two XMPP entities (e.g., romeo@montague.lit and 
juliet@capulet.lit) to set up, manage, and tear down a multimedia session. The 
negotiation takes place over XMPP, and the media transfer typically takes place 
outside of XMPP. A simplified session flow would be as follows: [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id343688">17</A>]</P>
<P class=caption></P>
<DIV class=indent><PRE class=prettyprint>Romeo                         Juliet
  |                             |
  |   session-initiate          |
  |----------------------------&gt;|
  |   ack                       |
  |&lt;----------------------------|
  |   session-accept            |
  |&lt;----------------------------|
  |   ack                       |
  |----------------------------&gt;|
  |   MEDIA SESSION             |
  |&lt;===========================&gt;|
  |   session-terminate         |
  |&lt;----------------------------|
  |   ack                       |
  |----------------------------&gt;|
  |                             |
  </PRE></DIV>
<P>To illustrate the basic flow, we show a truncated example with a "stub" 
application format and transport method (skipping non-essential steps to enforce 
the most essential concepts and ignoring security preconditions for now).</P>
<P class=caption><A id=example-1 name=example-1></A>Example 1. Initiator sends 
session-initiate (stub)</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='romeo@montague.lit/orchard'
    id='zid615d9'
    to='juliet@capulet.lit/balcony'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'&gt;
          action='session-initiate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content creator='initiator' name='this-is-a-stub'&gt;
      &lt;description xmlns='urn:xmpp:jingle:apps:stub:0'/&gt;
      &lt;transport xmlns='urn:xmpp:jingle:transports:stub:0'/&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </PRE></DIV>
<P>In this example, the initiator (romeo@montague.lit/orchard) sends a session 
initiation offer to the responder (juliet@capulet.lit/balcony), where the 
session is defined as the exchange of "stub" media over a "stub" transport.</P>
<P>After the responding client acknowledges receipt of the session-initiate 
message (not shown here), it prompts the responding user (if any) to choose 
whether she wants to proceed with the session (however, it does not need to 
prompt the user if for example she has configured her client to automatically 
accept session requests from this particular initiator). If she wants to proceed 
she selects the appropriate interface element and her client sends a 
session-accept message to the initiator.</P>
<P class=caption><A id=example-2 name=example-2></A>Example 2. Responder 
definitively accepts the session</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='rc61n59s'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-accept'
          responder='juliet@capulet.lit/balcony'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content creator='initiator' name='this-is-a-stub'&gt;
      &lt;description xmlns='urn:xmpp:jingle:apps:stub:0'/&gt;
      &lt;transport xmlns='urn:xmpp:jingle:transports:stub:0'/&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </PRE></DIV>
<P>The initiating client acknowledges receipt of the session-accept message (not 
shown here) and the parties can exchange "stub" media data over the "stub" 
transport.</P>
<P>Eventually, one of the parties (here the responder) will terminate the 
session.</P>
<P class=caption><A id=example-3 name=example-3></A>Example 3. Responder 
terminates the session</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='le71fa63'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-terminate'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;success/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </PRE></DIV>
<P>The initiating client acknowledges receipt of the session-terminate message 
(not shown here) and the session is ended.</P>
<P>We now "fill in the blanks" for the &lt;description/&gt; and 
&lt;transport/&gt; elements with a more complex example: a voice chat session, 
where the application type is a Jingle RTP session (with several different codec 
possibilities) and the transport method is ICE-UDP.</P>
<P class=caption><A id=example-4 name=example-4></A>Example 4. Initiator sends 
session-initiate</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='romeo@montague.lit/orchard'
    id='ph37a419'
    to='juliet@capulet.lit/balcony'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'&gt;
          action='session-initiate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content creator='initiator' name='voice'&gt;
      &lt;description xmlns='urn:xmpp:jingle:apps:rtp:1' media='audio'&gt;
        &lt;payload-type id='96' name='speex' clockrate='16000'/&gt;
        &lt;payload-type id='97' name='speex' clockrate='8000'/&gt;
        &lt;payload-type id='18' name='G729'/&gt;
        &lt;payload-type id='0' name='PCMU' /&gt;
        &lt;payload-type id='103' name='L16' clockrate='16000' channels='2'/&gt;
        &lt;payload-type id='98' name='x-ISAC' clockrate='8000'/&gt;
      &lt;/description&gt;
      &lt;transport xmlns='urn:xmpp:jingle:transports:ice-udp:1'
                 pwd='asd88fgpdd777uzjYhagZg'
                 ufrag='8hhy'&gt;
        &lt;candidate component='1'
                   foundation='1'
                   generation='0'
                   id='el0747fg11'
                   ip='10.0.1.1'
                   network='1'
                   port='8998'
                   priority='2130706431'
                   protocol='udp'
                   type='host'/&gt;
        &lt;candidate component='1'
                   foundation='2'
                   generation='0'
                   id='y3s2b30v3r'
                   ip='192.0.2.3'
                   network='1'
                   port='45664'
                   priority='1694498815'
                   protocol='udp'
                   rel-addr='10.0.1.1'
                   rel-port='8998'
                   type='srflx'/&gt;
      &lt;/transport&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </PRE></DIV>
<P>Upon receiving the session-initiate message, the responder determines whether 
it can proceed with the negotiation. If there is no error, the responder 
acknowledges the session initiation request.</P>
<P class=caption><A id=example-5 name=example-5></A>Example 5. Responder 
acknowledges session-initiate</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='ph37a419'
    to='romeo@montague.lit/orchard'
    type='result'/&gt;
  </PRE></DIV>
<P>When the responding user affirms that she would like to proceed with the 
session, the responding client sends a session-accept message to the initiator 
(including in this example the subset of offered codecs that the responding 
client supports and one or more transport candidates generated by the 
responder).</P>
<P class=caption><A id=example-6 name=example-6></A>Example 6. Responder 
definitively accepts the session</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='yd71f495'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-accept'
          responder='juliet@capulet.lit/balcony'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content creator='initiator' name='voice'&gt;
      &lt;description xmlns='urn:xmpp:jingle:apps:rtp:1' media='audio'&gt;
        &lt;payload-type id='97' name='speex' clockrate='8000'/&gt;
        &lt;payload-type id='18' name='G729'/&gt;
      &lt;/description&gt;
      &lt;transport xmlns='urn:xmpp:jingle:transports:ice-udp:1'&gt;
        &lt;candidate component='1'
                   foundation='1'
                   generation='0'
                   id='or2ii2syr1'
                   ip='192.0.2.1'
                   network='0'
                   port='3478'
                   priority='2130706431'
                   protocol='udp'
                   type='host'/&gt;
      &lt;/transport&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </PRE></DIV>
<P>And the initiating client acknowledges session acceptance:</P>
<P class=caption><A id=example-7 name=example-7></A>Example 7. Initiator 
acknowledges session acceptance</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='romeo@montague.lit/orchard'
    id='yd71f495'
    to='juliet@capulet.lit/balcony'
    type='result'/&gt;
  </PRE></DIV>
<P>Once the parties finish the transport negotiation, they would then exchange 
media using any of the acceptable codecs.</P>
<P>Eventually, one of the parties (here the responder) will terminate the 
session.</P>
<P class=caption><A id=example-8 name=example-8></A>Example 8. Responder 
terminates the session</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='vua614d9'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-terminate'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;success/&gt;
      &lt;text&gt;Sorry, gotta go!&lt;/text&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </PRE></DIV>
<P>The other party then acknowledges termination of the session:</P>
<P class=caption><A id=example-9 name=example-9></A>Example 9. Initiator 
acknowledges termination</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='romeo@montague.lit/orchard'
    id='vua614d9'
    to='juliet@capulet.lit/balcony'
    type='result'/&gt;
  </PRE></DIV>
<H2>3. <A id=reqs name=reqs>Requirements</A></H2>
<P>The protocol defined herein is designed to meet the following 
requirements:</P>
<OL>
  <LI>Make it possible to manage a wide variety of peer-to-peer sessions 
  (including but not limited to voice and video) within XMPP.</LI>
  <LI>When a peer-to-peer connection cannot be negotiated, make it possible to 
  fall back to relayed communications.</LI>
  <LI>Clearly separate the signalling channel (XMPP) from the data channel.</LI>
  <LI>Clearly separate the application format (e.g., RTP audio) from the 
  transport method (e.g., UDP).</LI>
  <LI>Make it possible to add, modify, and remove both application types and 
  transport methods in an existing session.</LI>
  <LI>Make it relatively easy to implement support for the protocol in standard 
  Jabber/XMPP clients.</LI>
  <LI>Where communication with non-XMPP entities is needed, push as much 
  complexity as possible onto server-side gateways between the XMPP network and 
  the non-XMPP network.</LI></OL>
<P>This document defines the signalling protocol only. Additional documents 
specify the following:</P>
<UL>
  <LI>
  <P>Various application formats (audio, video, etc.) and, where possible, 
  mapping of those types to the Session Description Protocol (SDP; see <SPAN 
  class=ref><A href="http://tools.ietf.org/html/rfc4566">RFC 4566</A></SPAN> [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id344000">18</A>]); examples 
  include <SPAN class=ref>Jingle RTP Sessions</SPAN> and <SPAN class=ref>Jingle 
  File Transfer</SPAN>.</P></LI>
  <LI>
  <P>Various transport methods; examples include <SPAN class=ref>Jingle ICE-UDP 
  Transport Method</SPAN>, <SPAN class=ref>Jingle Raw UDP Transport 
  Method</SPAN>, <SPAN class=ref>Jingle In-Band Bytestreams Transport 
  Method</SPAN>, and <SPAN class=ref>Jingle SOCKS5 Bytestreams Transport 
  Method</SPAN>.</P></LI>
  <LI>
  <P>Various methods of securing the transport before using it to send 
  application data; the only method defined so far is Transport Layer Security 
  as described in <SPAN class=ref><A 
  href="http://tools.ietf.org/html/draft-meyer-xmpp-e2e-encryption">Jingle 
  XTLS</A></SPAN> [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id344049">19</A>].</P></LI>
  <LI>
  <P>Procedures for mapping the Jingle signalling protocol to existing 
  signalling standards such as the IETF's Session Initiation Protocol (SIP) and 
  the ITU's H.323 protocol (see <SPAN class=ref>H.323</SPAN> [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id344075">20</A>]); see for 
  example <SPAN class=ref><A 
  href="http://tools.ietf.org/html/draft-saintandre-sip-xmpp-media">draft-saintandre-sip-xmpp-media</A></SPAN> 
  [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id344092">21</A>].</P></LI></UL>
<H2>4. <A id=terms name=terms>Terminology</A></H2>
<DIV class=indent>
<H3>4.1 <A id=terms-glossary name=terms-glossary>Glossary</A></H3>
<DIV class=indent>
<DL><DI>
  <DT><STRONG>Application Format</STRONG></DT>
  <DD>The data format of the content type being established, which formally 
  declares one purpose of the session (e.g., "audio" or "video"). This is the 
  'what' of the session (i.e., the bits to be transferred), such as the 
  acceptable codecs when establishing a voice conversation. In Jingle XML syntax 
  the application format is the namespace of the &lt;description/&gt; 
  element.</DD></DI><DI>
  <DT><STRONG>Component</STRONG></DT>
  <DD>A numbered stream of data that needs to be transmitted between the 
  endpoints for a given content type in the context of a given session. It is up 
  to the transport to negotiate the details of each component. Depending on the 
  content type, multiple components might be needed (e.g., one to transmit an 
  RTP stream and another to transmit RTCP timing information).</DD></DI><DI>
  <DT><STRONG>Content Type</STRONG></DT>
  <DD>A pair formed by the combination of one application format and one 
  transport method.</DD></DI><DI>
  <DT><STRONG>Session</STRONG></DT>
  <DD>One or more content types negotiated between two entities. It is delimited 
  in time by a session-initiate action and a session-terminate action. During 
  the lifetime of a session, content types can be added or removed. A session 
  consists of at least one content type at a time.</DD></DI><DI>
  <DT><STRONG>Transport Method</STRONG></DT>
  <DD>The method for establishing data stream(s) between entities. Possible 
  transports might include ICE-UDP, ICE-TCP, Raw UDP, In-Band Bytestreams, 
  SOCKS5 Bytestreams, etc. This is the 'how' of the session. In Jingle XML 
  syntax this is the namespace of the &lt;transport/&gt; element. The transport 
  method defines how to transfer bits from one host to another. Each transport 
  method MUST specify whether it is "datagram" or "streaming" as described in 
  the <A href="http://xmpp.org/extensions/xep-0166.html#transports">Transport 
  Types</A> section of this document.</DD></DI></DL></DIV></DIV>
<DIV class=indent>
<H3>4.2 <A id=terms-conventions name=terms-conventions>Conventions</A></H3>
<P>In diagrams, the following conventions are used:</P>
<UL>
  <LI>Single-dashed lines (---) represent Jingle stanzas that are sent via the 
  XMPP signalling channel.</LI>
  <LI>Double-dashed lines (===) represent media packets that are sent via the 
  data channel, which typically is not an XMPP channel (although the <SPAN 
  class=ref>Jingle In-Band Bytestreams Transport Method</SPAN> is an exception) 
  but instead is a direct or mediated channel between the 
endpoints.</LI></UL></DIV>
<H2>5. <A id=concepts name=concepts>Concepts and Approach</A></H2>
<P>Jingle consists of three parts, each with its own syntax and semantics:</P>
<OL>
  <LI>Overall session management</LI>
  <LI>Application types (the "what")</LI>
  <LI>Transport methods (the "how")</LI></OL>
<P>This document defines the semantics and syntax for overall session 
management. It also provides pluggable "slots" for application formats and 
transport methods, which are specified in separate documents.</P>
<P>At the most basic level, the process for initial negotiation of a Jingle 
session is as follows:</P>
<OL>
  <LI>One user (the "initiator") sends to another user (the "responder") a 
  session-initiate message containing at least one content definition, each of 
  which defines one application type, one transport method, and optionally one 
  security precondition.</LI>
  <LI>If the responder wishes to proceed, it sends a session-accept message to 
  the initiator, optionally including one or more transport candidates 
  (depending on the transport method specified in the session-initiate 
  message).</LI>
  <LI>The parties attempt to establish connectivity over the offered transport 
  method as defined in the relevant specification, which might involve the 
  exchange of transport-info messages for additional transport candidates; if 
  connectivity cannot be established then the parties might attempt to fall back 
  to another transport method using the transport-replace and transport-accept 
  messages.</LI>
  <LI>Optionally, the parties attempt to establish security for the transport 
  method before using it to exchange application data.</LI>
  <LI>Optionally, either party can add or remove content definitions, or change 
  the direction of the media flow, using the content-add, content-remove, and 
  content-modify messages.</LI>
  <LI>Optionally, either party can send session-info messages (e.g., to inform 
  the other party that its device is ringing).</LI>
  <LI>As soon as the initiator and responder determine that data can flow over 
  the negotiated transport (potentially only after a security precondition has 
  been met), they start sending application data over the transport.</LI></OL>
<P>Even after application data is being exchanged, the parties can adjust the 
session definition by sending additional Jingle messages, such as 
content-modify, content-remove, content-add, description-info, security-info, 
session-info, and transport-replace.</P>
<DIV class=indent>
<H3>5.1 <A id=concepts-session name=concepts-session>Overall Session 
Management</A></H3>
<P>The state machine for overall session management (i.e., the state per Session 
ID) is as follows:</P>
<P class=caption></P>
<DIV class=indent><PRE class=prettyprint>         o
         |
         | session-initiate
         |
         | +----------&gt;--------------+
         |/                          |
PENDING  o-----------------------+   |
         |   | content-accept,   |   |
         |   | content-add,      |   |
         |   | content-modify,   |   |
         |   | content-reject,   |   |
         |   | content-remove,   |   |
         |   | description-info, |   |
        \|/  | session-info,     |   |
         |   | transport-accept, |   |
         |   | transport-info,   |   |
         |   | transport-reject, |   |
         |   | transport-replace |   |
         |   +-------------------+   |
         |                           |
         | session-accept           \|/
         |                           |
 ACTIVE  o-----------------------+   |
         |   | content-accept,   |   |
         |   | content-add,      |   |
         |   | content-modify,   |   |
         |   | content-reject,   |   |
         |   | content-remove,   |   |
         |   | description-info, |   |
        \|/  | session-info,     |   |
         |   | transport-accept, |   |
         |   | transport-info,   |   |
         |   | transport-reject, |   |
         |   | transport-replace |   |
         |   +-------------------+   |
         |                           |
         +------------&gt;--------------+
                                     |
                                     | session-terminate
                                     |
                                     o ENDED
    </PRE></DIV>
<P>As shown, there are three overall session states:</P>
<OL>
  <LI>PENDING</LI>
  <LI>ACTIVE</LI>
  <LI>ENDED</LI></OL>
<P>Note: While it is allowed to send all actions while in the PENDING state, 
typically the responder will send a session-accept message as quickly as 
possible in order to expedite the transport negotiation; see the <A 
href="http://xmpp.org/extensions/xep-0166.html#sec">Security Considerations</A> 
section of this document regarding information exposure when the responder sends 
transport candidates to the initiator.</P>
<P>The actions related to management of the overall Jingle session are as 
follows (detailed definitions are provided in the <A 
href="http://xmpp.org/extensions/xep-0166.html#def-action">Action Attribute</A> 
section of this document).</P>
<DIV class=indent>
<DL><DI>
  <DT><STRONG>content-accept</STRONG></DT>
  <DD>Accept a content-add action received from another party.</DD></DI><DI>
  <DT><STRONG>content-add</STRONG></DT>
  <DD>Add one or more new content definitions to the session.</DD></DI><DI>
  <DT><STRONG>content-modify</STRONG></DT>
  <DD>Change the directionality of media sending.</DD></DI><DI>
  <DT><STRONG>content-reject</STRONG></DT>
  <DD>Reject a content-add action received from another party.</DD></DI><DI>
  <DT><STRONG>content-remove</STRONG></DT>
  <DD>Remove one or more content definitions from the session.</DD></DI><DI>
  <DT><STRONG>description-info</STRONG></DT>
  <DD>Exchange information about parameters for an application 
  type.</DD></DI><DI>
  <DT><STRONG>session-accept</STRONG></DT>
  <DD>Definitively accept a session negotiation.</DD></DI><DI>
  <DT><STRONG>session-info</STRONG></DT>
  <DD>Send session-level information, such as a ping or a ringing 
  message.</DD></DI><DI>
  <DT><STRONG>session-initiate</STRONG></DT>
  <DD>Request negotiation of a new Jingle session.</DD></DI><DI>
  <DT><STRONG>session-terminate</STRONG></DT>
  <DD>End an existing session.</DD></DI><DI>
  <DT><STRONG>transport-accept</STRONG></DT>
  <DD>Accept a transport-replace action received from another 
  party.</DD></DI><DI>
  <DT><STRONG>transport-info</STRONG></DT>
  <DD>Exchange transport candidates.</DD></DI><DI>
  <DT><STRONG>transport-reject</STRONG></DT>
  <DD>Reject a transport-replace action received from another 
  party.</DD></DI><DI>
  <DT><STRONG>transport-replace</STRONG></DT>
  <DD>Redefine a transport method or replace it with a different 
  method.</DD></DI></DL></DIV></DIV>
<H2>6. <A id=session name=session>Session Flow</A></H2>
<P>This section defines the high-level flow of a Jingle session. More detailed 
descriptions are provided in the specifications for Jingle application formats 
and transport methods.</P>
<DIV class=indent>
<H3>6.1 <A id=session-resource name=session-resource>Resource 
Determination</A></H3>
<P>In order to initiate a Jingle session, the initiator needs to determine which 
of the responder's XMPP resources is best for the desired application format. 
Methods for doing so are out of scope for this specification. However, see the 
<A href="http://xmpp.org/extensions/xep-0166.html#support">Determining 
Support</A> section of this document for relevant information.</P></DIV>
<DIV class=indent>
<H3>6.2 <A id=protocol-initiate name=protocol-initiate>Initiation</A></H3>
<P>Once the initiator has discovered which of the responder's XMPP resources is 
ideal for the desired application format, it sends a session initiation request 
to the responder. This request is an IQ-set containing a &lt;jingle/&gt; element 
qualified by the 'urn:xmpp:jingle:1' namespace (see <A 
href="http://xmpp.org/extensions/xep-0166.html#registrar-versioning">Namespace 
Versioning</A> regarding the possibility of incrementing the version number), 
where the value of the 'action' attribute is "session-initiate" and where the 
&lt;jingle/&gt; element contains one or more &lt;content/&gt; elements. Each 
&lt;content/&gt; element defines a content type to be transferred during the 
session, and each &lt;content/&gt; element in turn contains one 
&lt;description/&gt; child element that specifies a desired application format 
and one &lt;transport/&gt; child element that specifies a potential transport 
method, as well as (optionally) one &lt;security/&gt; element that specifies a 
security precondition that needs to be met before the parties can exchange 
application data over the negotiated transport.</P>
<P class=caption><A id=example-10 name=example-10></A>Example 10. Initiator 
sends session-initiate</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='romeo@montague.lit/orchard'
    id='xs51r0k4'
    to='juliet@capulet.lit/balcony'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-initiate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content creator='initiator' name='voice'&gt;
      &lt;description xmlns='urn:xmpp:jingle:apps:rtp:1' media='audio'&gt;
        &lt;payload-type id='96' name='speex' clockrate='16000'/&gt;
        &lt;payload-type id='97' name='speex' clockrate='8000'/&gt;
        &lt;payload-type id='18' name='G729'/&gt;
        &lt;payload-type id='0' name='PCMU' /&gt;
        &lt;payload-type id='103' name='L16' clockrate='16000' channels='2'/&gt;
        &lt;payload-type id='98' name='x-ISAC' clockrate='8000'/&gt;
      &lt;/description&gt;
      &lt;transport xmlns='urn:xmpp:jingle:transports:ice-udp:1'
                 pwd='asd88fgpdd777uzjYhagZg'
                 ufrag='8hhy'&gt;
        &lt;candidate component='1'
                   foundation='1'
                   generation='0'
                   id='el0747fg11'
                   ip='10.0.1.1'
                   network='1'
                   port='8998'
                   priority='2130706431'
                   protocol='udp'
                   type='host'/&gt;
        &lt;candidate component='1'
                   foundation='2'
                   generation='0'
                   id='y3s2b30v3r'
                   ip='192.0.2.3'
                   network='1'
                   port='45664'
                   priority='1694498815'
                   protocol='udp'
                   rel-addr='10.0.1.1'
                   rel-port='8998'
                   type='srflx'/&gt;
      &lt;/transport&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </PRE></DIV>
<P>Application types ought not to be mixed beyond necessity within a single 
session. Therefore the session initiation request (along with subsequent 
additions) will include only content-types that can be grouped together into a 
coherent session within a given Jingle application. For example, two parties 
might start an audio call but then add a video aspect to that call. If one of 
the parties decides to send a file to the other party as a result of discussion 
over the audio/video session or a text chat conversation, conceptually that is 
probably a separate session (unless file exchange or screen sharing or some 
other application type is an integral part of a broader collaboration experience 
and needs to be calibrated with the audio/video session).</P>
<P>Note: The syntax and semantics of the &lt;description/&gt;, 
&lt;transport/&gt;, and &lt;security/&gt; elements are out of scope for this 
document, since they are defined in related specifications. The syntax and 
semantics of the &lt;jingle/&gt; and &lt;content/&gt; elements are specified in 
this document under <A 
href="http://xmpp.org/extensions/xep-0166.html#def">Formal 
Definition</A>.</P></DIV>
<DIV class=indent>
<H3>6.3 <A id=protocol-response name=protocol-response>Responder 
Response</A></H3>
<DIV class=indent>
<H3>6.3.1 <A id=protocol-response-ack 
name=protocol-response-ack>Acknowledgement</A></H3>
<P>Unless one of the following errors occurs, the responder MUST acknowledge 
receipt of the initiation request.</P>
<P class=caption><A id=example-11 name=example-11></A>Example 11. Responder 
acknowledges session-initiate</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='xs51r0k4'
    to='romeo@montague.lit/orchard'
    type='result'/&gt;
      </PRE></DIV>
<P>However, after acknowledging the session initiation request, the responder 
might subsequently determine that it cannot proceed with negotiation of the 
session (e.g., because it does not support any of the offered application 
formats or transport methods, because a human user is busy or unable to accept 
the session, because a human user wishes to formally decline the session, etc.). 
In these cases, the responder SHOULD immediately acknowledge the session 
initiation request but then terminate the session with an appropriate reason as 
described in the <A 
href="http://xmpp.org/extensions/xep-0166.html#session-terminate">Termination</A> 
section of this document.</P></DIV>
<DIV class=indent>
<H3>6.3.2 <A id=protocol-response-errors 
name=protocol-response-errors>Errors</A></H3>
<P>There are several reasons why the responder might immediately return an error 
instead of acknowledging receipt of the initiation request:</P>
<UL>
  <LI>The initiator is unknown to the responder and the responder does not 
  communicate with unknown entities.</LI>
  <LI>The responder does not support Jingle.</LI>
  <LI>The responder wishes to redirect the request to another address.</LI>
  <LI>The responder does not have sufficient resources to participate in a 
  session.</LI>
  <LI>The initiation request was malformed.</LI></UL>
<P>If the initiator is unknown to the responder (e.g., via presence subscription 
as defined in <SPAN class=ref><A href="http://tools.ietf.org/html/rfc3921">RFC 
3921</A></SPAN> [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id344649">22</A>]) and the 
responder has a policy of not communicating via Jingle with unknown entities, it 
MUST return a &lt;service-unavailable/&gt; error.</P>
<P class=caption><A id=example-12 name=example-12></A>Example 12. Initiator is 
unknown to responder</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='xs51r0k4'
    to='romeo@montague.lit/orchard'
    type='error'&gt;
  &lt;error type='cancel'&gt;
    &lt;service-unavailable xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
      </PRE></DIV>
<P>If the responder does not support Jingle, it MUST return a 
&lt;service-unavailable/&gt; error.</P>
<P class=caption><A id=example-13 name=example-13></A>Example 13. Responder does 
not support Jingle</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='xs51r0k4'
    to='romeo@montague.lit/orchard'
    type='error'&gt;
  &lt;error type='cancel'&gt;
    &lt;service-unavailable xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
      </PRE></DIV>
<P>If the responder wishes to redirect the request to another address, it MUST 
return a &lt;redirect/&gt; error.</P>
<P class=caption><A id=example-14 name=example-14></A>Example 14. Responder 
redirection</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='xs51r0k4'
    to='romeo@montague.lit/orchard'
    type='error'&gt;
  &lt;error type='modify'&gt;
    &lt;redirect xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'&gt;
      xmpp:voicemail@capulet.lit
    &lt;/redirect&gt;
  &lt;/error&gt;
&lt;/iq&gt;
      </PRE></DIV>
<P>If the responder does not have sufficient resources to participate in a 
session, it MUST return a &lt;resource-constraint/&gt; error.</P>
<P class=caption><A id=example-15 name=example-15></A>Example 15. Responder has 
insufficent resources</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='xs51r0k4'
    to='romeo@montague.lit/orchard'
    type='error'&gt;
  &lt;error type='wait'&gt;
    &lt;resource-constraint xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
      </PRE></DIV>
<P>If the initiation request was malformed, the responder MUST return a 
&lt;bad-request/&gt; error.</P>
<P class=caption><A id=example-16 name=example-16></A>Example 16. Initiation 
request malformed</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='xs51r0k4'
    to='romeo@montague.lit/orchard'
    type='error'&gt;
  &lt;error type='cancel'&gt;
    &lt;bad-request xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
      </PRE></DIV></DIV></DIV>
<DIV class=indent>
<H3>6.4 <A id=session-negotiation name=session-negotiation>Negotiation</A></H3>
<P>Although in general it is preferable for the responder to send a 
session-accept message as soon as possible, some forms of negotiation might be 
necessary before the parties can agree on an acceptable set of application 
formats and transport methods. There are many potential parameter combinations, 
as defined in the relevant specifications for various application formats and 
transport methods.</P>
<P>The allowable negotiations (e.g., content-level and transport-level 
negotiations) include:</P>
<UL>
  <LI>Exchanging particular transport candidates via the transport-info 
  action.</LI>
  <LI>Modifying the communication direction for a content type via the 
  content-modify action.</LI>
  <LI>Changing the definition of a content type via the transport-replace action 
  (typically to fall back to a more suitable transport).</LI>
  <LI>Adding a content type via the content-add action.</LI>
  <LI>Removing a content type via the content-remove action.</LI></UL>
<P>These forms of negotiation can also occur after the session has been 
accepted.</P></DIV>
<DIV class=indent>
<H3>6.5 <A id=session-acceptance name=session-acceptance>Acceptance</A></H3>
<P>As soon as possible after receiving the session-initiate message, the 
responder informs the initiator that she wishes to proceed with the session by 
sending a session-accept message.</P>
<P class=caption><A id=example-17 name=example-17></A>Example 17. Responder 
accepts the session</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='jd82f517'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-accept'
          initiator='romeo@montague.lit/orchard'
          responder='juliet@capulet.lit/balcony'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content creator='initiator' name='voice'&gt;
      &lt;description xmlns='urn:xmpp:jingle:apps:rtp:1' media='audio'&gt;
        &lt;payload-type id='97' name='speex' clockrate='8000'/&gt;
        &lt;payload-type id='18' name='G729'/&gt;
      &lt;/description&gt;
      &lt;transport xmlns='urn:xmpp:jingle:transports:ice-udp:1'&gt;
        &lt;candidate component='1'
                   foundation='1'
                   generation='0'
                   id='or2ii2syr1'
                   ip='192.0.2.1'
                   network='0'
                   port='3478'
                   priority='2130706431'
                   protocol='udp'
                   type='host'/&gt;
      &lt;/transport&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </PRE></DIV>
<P class=box>Note: After receiving and acknowledging the "session-initiate" 
action received from the initiator, the responding client SHOULD present an 
interface element that enables a human user to explicitly agree to proceeding 
with the session (e.g., an "Accept Incoming Call?" pop-up window including "Yes" 
and "No" buttons). However, the responding client SHOULD NOT return a 
"session-accept" action to the initiator until the responder has explicitly 
agreed to proceed with the session (unless the initiator is on a list of 
entities whose sessions are automatically accepted).</P>
<P>The initiator then acknowledges the responder's definitive acceptance.</P>
<P class=caption><A id=example-18 name=example-18></A>Example 18. Initiator 
acknowledges session acceptance</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='romeo@montague.lit/orchard'
    id='jd82f517'
    to='juliet@capulet.lit/balcony'
    type='result'/&gt;
    </PRE></DIV>
<P>The session is now in the ACTIVE state. However, this does not necessarily 
mean that the parties can exchange application data yet, because further 
negotiation might be necessary (e.g., to fall back from the offered transport 
method to a suitable alternative).</P></DIV>
<DIV class=indent>
<H3>6.6 <A id=session-modify name=session-modify>Modifying an Active 
Session</A></H3>
<P>Once a session is in the ACTIVE state, it might be modified via a 
content-add, content-modify, content-remove, or transport-info message. Examples 
of such modifications are shown in the specifications for various application 
formats and transport methods.</P></DIV>
<DIV class=indent>
<H3>6.7 <A id=session-terminate name=session-terminate>Termination</A></H3>
<P>In order to gracefully end the session (which can be done at any point after 
acknowledging receipt of the initiation request, including immediately 
thereafter in order to decline the request), either the responder or the 
initiator MUST send a session-terminate message to the other party.</P>
<P>The party that terminates the session SHOULD include a &lt;reason/&gt; 
element that specifies why the session is being terminated. Examples follow.</P>
<P>Probably the primary reason for terminating a session is that the session has 
ended successfully (e.g., because a file has been sent or a voice call has 
completed); in this case, the recommended condition is &lt;success/&gt;.</P>
<P class=caption><A id=example-19 name=example-19></A>Example 19. Terminating 
the session (success)</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='bv81gs75'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;success/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </PRE></DIV>
<P>Another reason for terminating the session is that the terminating party is 
busy; in this case, the recommended condition is &lt;busy/&gt;.</P>
<P class=caption><A id=example-20 name=example-20></A>Example 20. Terminating 
the session (busy)</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='hr81fs63'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;busy/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </PRE></DIV>
<P>Another reason for terminating the session is that the terminating party 
wishes to formally decline the session; in this case, the recommended condition 
is &lt;decline/&gt;.</P>
<P class=caption><A id=example-21 name=example-21></A>Example 21. Terminating 
the session (session formally declined)</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='ky47g295'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;decline/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </PRE></DIV>
<P>Another reason for terminating the session is that the terminating party 
already has an existing session with the other party and wishes to use that 
session rather than initiate a new session; in this case, the recommended 
condition is &lt;alternative-session/&gt; and the terminating party SHOULD 
include the session ID of the alternative session in the &lt;sid/&gt; 
element.</P>
<P class=caption><A id=example-22 name=example-22></A>Example 22. Terminating 
the session (existing session)</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='ay3r2b86'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;alternative-session&gt;
        &lt;sid&gt;b84tkkwlmb48kgfb&lt;/sid&gt;
      &lt;/alternative-session&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </PRE></DIV>
<P>Another reason for terminating the session is that the terminating party does 
not support any of the offered transport methods; in this case, the recommended 
condition is &lt;unsupported-transports/&gt;.</P>
<P class=caption><A id=example-23 name=example-23></A>Example 23. Terminating 
the session (no offered transport method supported)</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='h82bs51g'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;unsupported-transports/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </PRE></DIV>
<P>Another reason for terminating the session is that the terminating party has 
determined that transport setup has failed in an unrecoverable fashion (e.g., 
all transport methods have been exhausted even after fallback and the last 
method attempted has failed); in this case, the recommended condition is 
&lt;failed-transport/&gt;.</P>
<P class=caption><A id=example-24 name=example-24></A>Example 24. Terminating 
the session (transport negotiation failed)</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='pe81ga88'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;failed-transport/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </PRE></DIV>
<P>Another reason for terminating the session is that the terminating party does 
not support any of the offered application types; in this case, the recommended 
condition is &lt;unsupported-applications/&gt;.</P>
<P class=caption><A id=example-25 name=example-25></A>Example 25. Terminating 
the session (no offered application type supported)</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='yd62vd67'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;unsupported-applications/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </PRE></DIV>
<P>Another reason for terminating the session is that the terminating party has 
determined that setup of the application type has failed in an unrecoverable 
fashion (e.g., the client cannot initialize audio processing for a voice call); 
in this case, the recommended condition is &lt;failed-application/&gt;.</P>
<P class=caption><A id=example-26 name=example-26></A>Example 26. Terminating 
the session (application setup failed)</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='kd82vs71'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;failed-application/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </PRE></DIV>
<P>Another reason for terminating the session is that the terminating party 
supports the offered application type but does not support the offered or 
negotiated parameters (e.g., in a voice call none of the payload types); in this 
case, the recommended condition is &lt;incompatible-parameters/&gt;.</P>
<P class=caption><A id=example-27 name=example-27></A>Example 27. Terminating 
the session (incompatible parameters)</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='hb3m59s7'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-terminate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;reason&gt;
      &lt;incompatible-parameters/&gt;
    &lt;/reason&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </PRE></DIV>
<P>Note: Other reasons for terminating the session might apply, and the 
foregoing list is not exhaustive.</P>
<P>Upon receiving session-terminate message, the other party MUST then 
acknowledge termination of the session:</P>
<P class=caption><A id=example-28 name=example-28></A>Example 28. Acknowledging 
termination</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='romeo@montague.lit/orchard'
    id='h82bs51g'
    to='juliet@capulet.lit/balcony'
    type='result'/&gt;
    </PRE></DIV>
<P>Note: As soon as an entity sends a session-terminate action, it MUST consider 
the session to be in the ENDED state (even before receiving acknowledgement from 
the other party). If the terminating entity receives additional Jingle-related 
IQ-sets from the other party after sending the session-terminate action, it MUST 
reply with an &lt;unknown-session/&gt; error.</P>
<P class=caption><A id=example-29 name=example-29></A>Example 29. 
Unknown-session error</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='romeo@montague.lit/orchard'
    id='ur71vs62'
    to='juliet@capulet.lit/balcony'
    type='error'&gt;
  &lt;error type='cancel'&gt;
    &lt;item-not-found xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;unknown-session xmlns='urn:xmpp:jingle:errors:1'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
    </PRE></DIV>
<P>Not all Jingle sessions end gracefully. When the parties to a Jingle session 
also exchange XMPP presence information, receipt of &lt;presence 
type='unavailable'/&gt; from the other party SHOULD be considered a 
session-ending event that justifies proactively sending a session-terminate 
message to the seemingly unavailable party -- if, that is, no other 
communication has been received within 5 or 10 seconds from the seemingly 
unavailable party in the form of XMPP signalling traffic, connectivity checks, 
or continued media transfer.</P></DIV>
<DIV class=indent>
<H3>6.8 <A id=session-info name=session-info>Informational Messages</A></H3>
<P>At any point after initiation of a Jingle session, either entity MAY send an 
informational message to the other party, for example to inform the other party 
that a device is ringing.</P>
<P class=caption><A id=example-30 name=example-30></A>Example 30. Responder 
sends ringing message</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='hq7rg186'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-info'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;ringing xmlns='urn:xmpp:jingle:apps:rtp:1:info'/&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
    </PRE></DIV>
<P>An informational message MUST be an IQ-set containing a &lt;jingle/&gt; 
element whose 'action' attribute is set to a value of "session-info", 
"description-info", or "transport-info"; the &lt;jingle/&gt; element SHOULD 
further contain a payload child element (specific to the application format or 
transport method) that specifies the information being communicated. If the 
party that receives an informational message does not understand the payload, it 
MUST return a &lt;feature-not-implemented/&gt; error with a Jingle-specific 
error condition of &lt;unsupported-info/&gt;.</P>
<P class=caption><A id=example-31 name=example-31></A>Example 31. Responder 
returns unsupported-info error</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='romeo@montague.lit/orchard'
    id='hq7rg186'
    to='juliet@capulet.lit/balcony'
    type='error'&gt;
  &lt;error type='modify'&gt;
    &lt;feature-not-implemented xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;unsupported-info xmlns='urn:xmpp:jingle:errors:1'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
    </PRE></DIV>
<P>However, the &lt;jingle/&gt; element associated with a session-info message 
MAY be empty. If either party receives an empty session-info message for an 
active session, it MUST send an empty IQ result; this usage functions as a 
"ping" to determine session vitality via the XMPP signalling channel.</P>
<P class=caption><A id=example-32 name=example-32></A>Example 32. Responder 
sends session ping</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='juliet@capulet.lit/balcony'
    id='ug37vb25'
    to='romeo@montague.lit/orchard'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'
          action='session-info'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'/&gt;
&lt;/iq&gt;
    </PRE></DIV>
<P class=caption><A id=example-33 name=example-33></A>Example 33. Initiator 
returns IQ-result</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='romeo@montague.lit/orchard'
    id='ug37vb25'
    to='juliet@capulet.lit/balcony'
    type='result'/&gt;
    </PRE></DIV></DIV>
<H2>7. <A id=def name=def>Formal Definition</A></H2>
<DIV class=indent>
<H3>7.1 <A id=def-jingle name=def-jingle>Jingle Element</A></H3>
<P>The &lt;jingle/&gt; element MAY be empty or contain one or more 
&lt;content/&gt; elements (for which see <A 
href="http://xmpp.org/extensions/xep-0166.html#def-content">Content 
Element</A>).</P>
<P>The attributes of the &lt;jingle/&gt; element are as follows.</P>
<DIV class=indent>
<P class=caption><A id=table-1 name=table-1></A>Table 1: Attributes of Jingle 
Element</P>
<TABLE border=1 cellSpacing=0 cellPadding=3>
  <TBODY>
  <TR class=body>
    <TH>Attribute</TH>
    <TH>Definition</TH>
    <TH>Inclusion</TH></TR>
  <TR class=body>
    <TD>action</TD>
    <TD>A Jingle action as described under <A 
      href="http://xmpp.org/extensions/xep-0166.html#def-action">Action 
      Attribute</A>.</TD>
    <TD>REQUIRED</TD></TR>
  <TR class=body>
    <TD>initiator*</TD>
    <TD>The full JID of the entity that has initiated the session flow. When 
      the Jingle action is "session-initiate", the &lt;jingle/&gt; element 
      SHOULD possess an 'initiator' attribute that explicitly specifies the full 
      JID of the initiating entity; for all other actions, the &lt;jingle/&gt; 
      element SHOULD NOT possess an 'initiator' attribute and the recipient of 
      the message SHOULD ignore the value if provided. The value of the 
      'initiator' attribute MAY be different from the 'from' address on the 
      IQ-set of the session-initiate message (e.g., to handle certain 
      interactions involving call managers, soft switches, and media relays). 
      This usage shall be defined in other specifications, for example, in <SPAN 
      class=ref><A href="http://xmpp.org/extensions/xep-0251.html">Jingle 
      Session Transfer</A></SPAN> [<A 
      href="http://xmpp.org/extensions/xep-0166.html#nt-id345184">23</A>]. 
      However, in all cases if the 'initiator' and 'from' values differ then the 
      responder MUST NOT interact with the 'initiator' JID unless it trusts the 
      'initiator' JID or trusts that the 'from' JID is allowed to authorize the 
      'initiator' JID to act on the 'from' JID's behalf. In the absence of 
      explicit rules for handling this case, the responder SHOULD simply ignore 
      the 'initiator' attribute and treat the 'from' JID as the initiating 
      entity. After sending acknowledgement of the session-initiate message, the 
      responder MUST send all future commmunications about the Jingle session to 
      the initiator (whether the initiator is considered the 'from' JID or the 
      'initiator' JID).</TD>
    <TD>RECOMMENDED for session-initiate, NOT RECOMMENDED otherwise</TD></TR>
  <TR class=body>
    <TD>responder*</TD>
    <TD>The full JID of the entity that has replied to the initiation, which 
      can be different from the 'to' address on the IQ-set. When the Jingle 
      action is "session-accept", the &lt;jingle/&gt; element SHOULD possess a 
      'responder' attribute that explicitly specifies the full JID of the 
      responding entity; for all other actions, the &lt;jingle/&gt; element 
      SHOULD NOT possess a 'responder' attribute and the recipient of the 
      message SHOULD ignore the value if provided. The value of the 'responder' 
      attribute MAY be different from the 'from' address on the IQ-set of the 
      session-accept message, where the logic for handling any difference 
      between the 'responder' JID and the 'from' JID follows the same logic as 
      for session-initiate messages (see above). After sending acknowledgement 
      of the session-accept message, the initiator MUST send all future 
      commmunications about this Jingle session to the responder (whether the 
      responder is considered the 'from' JID or the 'responder' JID).</TD>
    <TD>RECOMMENDED for session-accept, NOT RECOMMENDED otherwise</TD></TR>
  <TR class=body>
    <TD>sid</TD>
    <TD>A random session identifier generated by the initiator, which 
      effectively maps to the local-part of a SIP "Call-ID" parameter; this 
      SHOULD match the XML Nmtoken production [<A 
      href="http://xmpp.org/extensions/xep-0166.html#nt-id345226">24</A>] so 
      that XML character escaping is not needed for characters such as '&amp;'. 
      In some situations the Jingle session identifier might have security 
      implications. See <SPAN class=ref><A 
      href="http://tools.ietf.org/html/rfc4086">RFC 4086</A></SPAN> [<A 
      href="http://xmpp.org/extensions/xep-0166.html#nt-id345258">25</A>] 
      regarding requirements for randomness.</TD>
    <TD>REQUIRED</TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=indent>
<H3>7.2 <A id=def-action name=def-action>Action Attribute</A></H3>
<P>The value of the 'action' attribute MUST be one of the following. If an 
entity receives a value not defined here, it MUST ignore the attribute and MUST 
return a &lt;bad-request/&gt; error to the sender. There is no default value for 
the 'action' attribute.</P>
<DIV class=indent>
<H3>7.2.1 <A id=def-action-content-accept 
name=def-action-content-accept>content-accept</A></H3>
<P>The <SPAN class=strong>content-accept</SPAN> action is used to accept a 
content-add action received from another party.</P></DIV>
<DIV class=indent>
<H3>7.2.2 <A id=def-action-content-add 
name=def-action-content-add>content-add</A></H3>
<P>The <SPAN class=strong>content-add</SPAN> action is used to add one or more 
new content definitions to the session. The sender MUST specify only the added 
content definition(s), not the added content definition(s) plus the existing 
content definition(s). Therefore it is the responsibility of the recipient to 
maintain a local copy of the current content definition(s). If the recipient 
wishes to include the new content definition in the session, it MUST send a 
content-accept action to the other party; if not, it MUST send a content-reject 
action to the other party.</P></DIV>
<DIV class=indent>
<H3>7.2.3 <A id=def-action-content-modify 
name=def-action-content-modify>content-modify</A></H3>
<P>The <SPAN class=strong>content-modify</SPAN> action is used to change the 
direction of an existing content definition through modification of the 
'senders' attribute. If the recipient deems the directionality of a 
content-modify action to be unacceptable, it MAY reply with a contrary 
content-modify action, terminate the session, or simply refuse to send or accept 
application data in the new direction. In any case, the recipient MUST NOT send 
a content-accept action in response to the content-modify.</P></DIV>
<DIV class=indent>
<H3>7.2.4 <A id=def-action-content-reject 
name=def-action-content-reject>content-reject</A></H3>
<P>The <SPAN class=strong>content-reject</SPAN> action is used to reject a 
content-add action received from another party.</P>
<P>If the content-reject results in zero content definitions for the session, 
the entity that receives the content-reject SHOULD send a session-terminate 
action to the other party (since a session with no content definitions is 
void).</P></DIV>
<DIV class=indent>
<H3>7.2.5 <A id=def-action-content-remove 
name=def-action-content-remove>content-remove</A></H3>
<P>The <SPAN class=strong>content-remove</SPAN> action is used to remove one or 
more content definitions from the session. The sender MUST specify only the 
removed content definition(s), not the removed content definition(s) plus the 
remaining content definition(s). Therefore it is the responsibility of the 
recipient to maintain a local copy of the current content definition(s). Upon 
receiving a content-remove from the other party, the recipient MUST NOT send a 
content-accept and MUST NOT continue to negotiate the transport method or send 
application data related to that content definition.</P>
<P>If the content-remove results in zero content definitions for the session, 
the entity that receives the content-remove SHOULD send a session-terminate 
action to the other party (since a session with no content definitions is 
void).</P></DIV>
<DIV class=indent>
<H3>7.2.6 <A id=def-action-description-info 
name=def-action-description-info>description-info</A></H3>
<P>The <SPAN class=strong>description-info</SPAN> action is used to send 
informational hints about parameters related to the application type, such as 
the suggested height and width of a video display area or suggested 
configuration for an audio stream.</P></DIV>
<DIV class=indent>
<H3>7.2.7 <A id=def-action-security-info 
name=def-action-security-info>security-info</A></H3>
<P>The <SPAN class=strong>security-info</SPAN> action is used to send 
information related to establishment or maintenance of security 
preconditions.</P></DIV>
<DIV class=indent>
<H3>7.2.8 <A id=def-action-session-accept 
name=def-action-session-accept>session-accept</A></H3>
<P>The <SPAN class=strong>session-accept</SPAN> action is used to definitively 
accept a session negotiation (implicitly this action also serves as a 
content-accept). A session-accept action indicates a willingness to proceed with 
the session (which might necessitate further negotiation before media can be 
exchanged). The session-accept action indicates acceptance <SPAN 
class=em>only</SPAN> of the content definition(s) whose disposition type is 
"session" (the default value of the &lt;content/&gt; element's 'disposition' 
attribute), not any content definition(s) whose disposition type is something 
other than "session" (e.g., "early-session" for early media).</P>
<P>In the session-accept stanza, the &lt;jingle/&gt; element MUST contain one or 
more &lt;content/&gt; elements, each of which MUST contain one 
&lt;description/&gt; element and one &lt;transport/&gt; element.</P></DIV>
<DIV class=indent>
<H3>7.2.9 <A id=def-action-session-info 
name=def-action-session-info>session-info</A></H3>
<P>The <SPAN class=strong>session-info</SPAN> action is used to send 
session-level information, such as a session ping or (for Jingle RTP sessions) a 
ringing message.</P></DIV>
<DIV class=indent>
<H3>7.2.10 <A id=def-action-session-initiate 
name=def-action-session-initiate>session-initiate</A></H3>
<P>The <SPAN class=strong>session-initiate</SPAN> action is used to request 
negotiation of a new Jingle session. When sending a session-initiate with one 
&lt;content/&gt; element, the value of the &lt;content/&gt; element's 
'disposition' attribute MUST be "session" (if there are multiple 
&lt;content/&gt; elements then at least one MUST have a disposition of 
"session"); if this rule is violated, the responder MUST return a 
&lt;bad-request/&gt; error to the initiator.</P></DIV>
<DIV class=indent>
<H3>7.2.11 <A id=def-action-session-terminate 
name=def-action-session-terminate>session-terminate</A></H3>
<P>The <SPAN class=strong>session-terminate</SPAN> action is used to end an 
existing session.</P></DIV>
<DIV class=indent>
<H3>7.2.12 <A id=def-action-transport-accept 
name=def-action-transport-accept>transport-accept</A></H3>
<P>The <SPAN class=strong>transport-accept</SPAN> action is used to accept a 
transport-replace action received from another party.</P></DIV>
<DIV class=indent>
<H3>7.2.13 <A id=def-action-transport-info 
name=def-action-transport-info>transport-info</A></H3>
<P>The <SPAN class=strong>transport-info</SPAN> action is used to exchange 
transport candidates; it is mainly used in <SPAN class=ref>Jingle ICE-UDP</SPAN> 
but might be used in other transport specifications.</P></DIV>
<DIV class=indent>
<H3>7.2.14 <A id=def-action-transport-reject 
name=def-action-transport-reject>transport-reject</A></H3>
<P>The <SPAN class=strong>transport-reject</SPAN> action is used to reject a 
transport-replace action received from another party.</P></DIV>
<DIV class=indent>
<H3>7.2.15 <A id=def-action-transport-replace 
name=def-action-transport-replace>transport-replace</A></H3>
<P>The <SPAN class=strong>transport-replace</SPAN> action is used to redefine a 
transport method, typically for fallback to a different method (e.g., changing 
from ICE-UDP to Raw UDP for a datagram transport, or changing from <SPAN 
class=ref><A href="http://xmpp.org/extensions/xep-0065.html">SOCKS5 
Bytestreams</A></SPAN> [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id345542">26</A>] to <SPAN 
class=ref><A href="http://xmpp.org/extensions/xep-0047.html">In-Band 
Bytestreams</A></SPAN> [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id345560">27</A>] for a 
streaming transport). If the recipient wishes to use the new transport 
definition, it MUST send a transport-accept action to the other party; if not, 
it MUST send a transport-reject action to the other party.</P></DIV>
<DIV class=indent>
<H3>7.2.16 <A id=def-action-ties name=def-action-ties>Tie Breaking Related to 
Jingle Actions</A></H3>
<P>It is possible that the same Jingle action can be sent at the same time by 
both parties. There are two possible scenarios:</P>
<DIV class=indent>
<DL><DI>
  <DT><STRONG>No existing session</STRONG></DT>
  <DD>If there is no existing session and both parties simultaneously send a 
  Jingle session-initiate message with a content-type that is functionally 
  equivalent (e.g., each message requests initiation of a voice call), the 
  action with the lower of the two session IDs MUST overrule the other action, 
  where by "lower" is meant the session ID that is sorted first using "i;octet" 
  collation as specified in Section 9.3 of <SPAN class=ref><A 
  href="http://tools.ietf.org/html/rfc4790">RFC 4790</A></SPAN> [<A 
  href="http://xmpp.org/extensions/xep-0166.html#nt-id345617">28</A>] (in the 
  unlikely event that the random session IDs are the same, the action sent by 
  the lower of the JabberIDs MUST overrule the other action). The party that 
  receives the session-initiate action with the lower of the two session IDs 
  MUST acknowledge the action or return an error condition that would normally 
  be returned when receiving a session-initiate message, and the party that 
  receives the session-initiate action with the higher of the two session IDs 
  MUST return a &lt;conflict/&gt; error to the other party, which SHOULD include 
  a Jingle-specific condition of &lt;tie-break/&gt;.</DD></DI><DI>
  <DT><STRONG>Existing session</STRONG></DT>
  <DD>In the context of an existing session, the action sent by the initiator 
  MUST overrule the action sent by the responder; i.e., both parties MUST accept 
  the action sent by the initiator and the initiator MUST return a 
  &lt;conflict/&gt; error to the responder for the duplicate action, which 
  SHOULD include a Jingle-specific condition of 
&lt;tie-break/&gt;.</DD></DI></DL></DIV>
<P>In both scenarios, the error to be returned is &lt;conflict/&gt;, as shown in 
the following example.</P>
<P class=caption><A id=example-34 name=example-34></A>Example 34. Initiator 
returns conflict error on tie-break</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='romeo@montague.lit/orchard'
    id='hb2f164w'
    to='juliet@capulet.lit/balcony'
    type='error'&gt;
  &lt;error type='cancel'&gt;
    &lt;conflict xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;tie-break xmlns='urn:xmpp:jingle:errors:1'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
      </PRE></DIV></DIV></DIV>
<DIV class=indent>
<H3>7.3 <A id=def-content name=def-content>Content Element</A></H3>
<P>The attributes of the &lt;content/&gt; element are as follows.</P>
<DIV class=indent>
<P class=caption><A id=table-2 name=table-2></A>Table 2: Attributes of Content 
Element</P>
<TABLE border=1 cellSpacing=0 cellPadding=3>
  <TBODY>
  <TR class=body>
    <TH>Attribute</TH>
    <TH>Definition</TH>
    <TH>Inclusion</TH></TR>
  <TR class=body>
    <TD>creator</TD>
    <TD>Which party originally generated the content type (used to prevent 
      race conditions regarding modifications); the defined values are 
      "initiator" and "responder" (where the default is "initiator"). The value 
      of the 'creator' attribute for a given content type MUST always match the 
      party that originally generated the content type, even for Jingle actions 
      that are sent by the other party in relation to that content type (e.g., 
      subsequent content-modify or transport-info messages). The combination of 
      the 'creator' attribute and the 'name' attribute is unique among both 
      parties to a Jingle session.</TD>
    <TD>REQUIRED</TD></TR>
  <TR class=body>
    <TD>disposition</TD>
    <TD>How the content definition is to be interpreted by the recipient. The 
      meaning of this attribute matches the "Content-Disposition" header as 
      defined in <SPAN class=ref><A 
      href="http://tools.ietf.org/html/rfc2183">RFC 2183</A></SPAN> [<A 
      href="http://xmpp.org/extensions/xep-0166.html#nt-id345734">29</A>] and 
      applied to SIP by <SPAN class=ref>RFC 3261</SPAN>. The value of this 
      attribute SHOULD be one of the values registered in the <SPAN class=ref><A 
      href="http://www.iana.org/assignments/mail-cont-disp">IANA Mail Content 
      Disposition Values and Parameters Registry</A></SPAN> [<A 
      href="http://xmpp.org/extensions/xep-0166.html#nt-id345764">30</A>]. The 
      default value of this attribute is "session".</TD>
    <TD>OPTIONAL</TD></TR>
  <TR class=body>
    <TD>name</TD>
    <TD>A unique name or identifier for the content type according to the 
      creator, which MAY have meaning to a human user in order to differentiate 
      this content type from other content types (e.g., two content types 
      containing video media could differentiate between "room-pan" and 
      "slides"). If there are two content types with the same value for the 
      'name' attribute, they shall understood as alternative definitions for the 
      same purpose (e.g., a legacy method and a standards-based method for 
      establishing a voice call), typically to smooth the transition from an 
      older technology to Jingle.</TD>
    <TD>REQUIRED</TD></TR>
  <TR class=body>
    <TD>senders</TD>
    <TD>Which parties in the session will be generating content; the allowable 
      values are "initiator", "none", "responder", and "both" (where the default 
      is "both").</TD>
    <TD>OPTIONAL except when sending content-modify, in which case it is 
      REQUIRED.</TD></TR></TBODY></TABLE></DIV></DIV>
<DIV class=indent>
<H3>7.4 <A id=def-reason name=def-reason>Reason Element</A></H3>
<P>The structure of the &lt;reason/&gt; element is as follows.</P>
<UL>
  <LI>The &lt;reason/&gt; element MUST contain an element that provides 
  machine-readable information about the condition that prompted the 
action.</LI>
  <LI>The &lt;reason/&gt; element MAY contain a &lt;text/&gt; element that 
  provides human-readable information about the reason for the action.</LI>
  <LI>The &lt;reason/&gt; element MAY contain an element qualified by some other 
  namespace that provides more detailed machine-readable information about the 
  reason for the action.</LI></UL>
<P>A &lt;reason/&gt; element can be included with any Jingle action, and is not 
limited to session termination events.</P>
<P>The defined conditions are described in the following table.</P>
<DIV class=indent>
<P class=caption><A id=table-3 name=table-3></A>Table 3: Defined Conditions</P>
<TABLE border=1 cellSpacing=0 cellPadding=3>
  <TBODY>
  <TR class=body>
    <TH>Element</TH>
    <TH>Description</TH></TR>
  <TR class=body>
    <TD>&lt;alternative-session/&gt;</TD>
    <TD>The party prefers to use an existing session with the peer rather than 
      initiate a new session; the Jingle session ID of the alternative session 
      SHOULD be provided as the XML character data of the &lt;sid/&gt; 
  child.</TD></TR>
  <TR class=body>
    <TD>&lt;busy/&gt;</TD>
    <TD>The party is busy and cannot accept a session.</TD></TR>
  <TR class=body>
    <TD>&lt;cancel/&gt;</TD>
    <TD>The initiator wishes to formally cancel the session initiation 
    request.</TD></TR>
  <TR class=body>
    <TD>&lt;connectivity-error/&gt;</TD>
    <TD>The action is related to connectivity problems.</TD></TR>
  <TR class=body>
    <TD>&lt;decline/&gt;</TD>
    <TD>The party wishes to formally decline the session.</TD></TR>
  <TR class=body>
    <TD>&lt;expired/&gt;</TD>
    <TD>The session length has exceeded a pre-defined time limit (e.g., a 
      meeting hosted at a conference service).</TD></TR>
  <TR class=body>
    <TD>&lt;failed-application/&gt;</TD>
    <TD>The party has been unable to initialize processing related to the 
      application type.</TD></TR>
  <TR class=body>
    <TD>&lt;failed-transport/&gt;</TD>
    <TD>The party has been unable to establish connectivity for the transport 
      method.</TD></TR>
  <TR class=body>
    <TD>&lt;general-error/&gt;</TD>
    <TD>The action is related to a non-specific application error.</TD></TR>
  <TR class=body>
    <TD>&lt;gone/&gt;</TD>
    <TD>The entity is going offline or is no longer available.</TD></TR>
  <TR class=body>
    <TD>&lt;incompatible-parameters/&gt;</TD>
    <TD>The party supports the offered application type but does not support 
      the offered or negotiated parameters.</TD></TR>
  <TR class=body>
    <TD>&lt;media-error/&gt;</TD>
    <TD>The action is related to media processing problems.</TD></TR>
  <TR class=body>
    <TD>&lt;security-error/&gt;</TD>
    <TD>The action is related to a violation of local security policies.</TD></TR>
  <TR class=body>
    <TD>&lt;success/&gt;</TD>
    <TD>The action is generated during the normal course of state management 
      and does not reflect any error.</TD></TR>
  <TR class=body>
    <TD>&lt;timeout/&gt;</TD>
    <TD>A request has not been answered so the sender is timing out the 
      request.</TD></TR>
  <TR class=body>
    <TD>&lt;unsupported-applications/&gt;</TD>
    <TD>The party supports none of the offered application types.</TD></TR>
  <TR class=body>
    <TD>&lt;unsupported-transports/&gt;</TD>
    <TD>The party supports none of the offered transport 
methods.</TD></TR></TBODY></TABLE></DIV></DIV>
<H2>8. <A id=transports name=transports>Transport Types</A></H2>
<P>Jingle defines two types of transport methods.</P>
<DIV class=indent>
<H3>8.1 <A id=transports-datagram name=transports-datagram>Datagram</A></H3>
<P>A datagram transport has one or more components with which to exchange 
packets with UDP-like behavior. Packets might be of arbitrary length, might be 
received out of order, and might not be received at all (i.e., the transport is 
lossy). Each component is assigned a string identifier and has a maximum packet 
length.</P>
<P>Applications compatible with datagram transports MUST specify how many 
components are necessary, what identifier to assign each component, and how each 
component will be used.</P></DIV>
<DIV class=indent>
<H3>8.2 <A id=transports-streaming name=transports-streaming>Streaming</A></H3>
<P>A streaming transport has one or more components with which to exchange 
bidirectional bytestreams with TCP-like behavior. Bytes are received reliably 
and in order, and applications MUST NOT rely on a stream being chunked in any 
specific way. Each component is assigned a string identifier and has a maximum 
packet length.</P>
<P>Applications compatible with stream transports MUST specify how many 
components are necessary, what identifier to assign each component, and what 
data shall be exchanged over the transport.</P></DIV>
<H2>9. <A id=preconditions name=preconditions>Security Preconditions</A></H2>
<P>The initiator MAY include a &lt;security/&gt; element in its offer to signal 
that it wishes to enforce some security precondition on the session. A stub 
example follows.</P>
<P class=caption><A id=example-35 name=example-35></A>Example 35. Initiator 
sends session-initiate with security precondition (stub)</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='romeo@montague.lit/orchard'
    id='tiw51bv9'
    to='juliet@capulet.lit/balcony'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'&gt;
          action='session-initiate'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content creator='initiator' name='this-is-a-stub'&gt;
      &lt;description xmlns='urn:xmpp:jingle:apps:stub:0'/&gt;
      &lt;transport xmlns='urn:xmpp:jingle:transports:stub:0'/&gt;
      &lt;security xmlns='urn:xmpp:jingle:security:stub:0'/&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </PRE></DIV>
<P>Currently the only security precondition that is envisioned will enforce the 
use of end-to-end encryption for the transport before application data can be 
exchanged. This document does not define any security preconditions, just as it 
does not define any application types or transport methods. See <SPAN 
class=ref><A 
href="http://tools.ietf.org/html/draft-meyer-xmpp-e2e-encryption">Jingle 
XTLS</A></SPAN> [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id346123">31</A>] for an 
in-progress description of a security precondition using Transport Layer 
Security (TLS).</P>
<P>In order to exchange information about the establishment or maintenance of a 
security precondition, either party might send a Jingle security-info message. 
For example, when attempting to negotiate the use of TLS the initiator might 
send hints about his supported TLS methods (e.g., X.509 certificates and Secure 
Remote Password) in his session-initiate message and the responder might also 
send hints about her supported methods (e.g., X.509 and SRP) in her 
session-accept message; however, it is possible that the initiator might be able 
to verify the responder's certificate and therefore needs to inform the 
responder (via a security-info message) that he can in the end support only the 
X.509 method for this negotiation. An example follows.</P>
<P class=caption><A id=example-36 name=example-36></A>Example 36. Initiator 
sends security-info message</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='romeo@montague.lit/orchard'
    id='zyw6m167'
    to='juliet@capulet.lit/balcony'
    type='set'&gt;
  &lt;jingle xmlns='urn:xmpp:jingle:1'&gt;
          action='security-info'
          initiator='romeo@montague.lit/orchard'
          sid='a73sjjvkla37jfea'&gt;
    &lt;content creator='initiator' name='xmlstream'&gt;
      &lt;security xmlns='urn:xmpp:jingle:security:xtls:0'&gt;
        &lt;method name='x509'/&gt;
      &lt;/security&gt;
    &lt;/content&gt;
  &lt;/jingle&gt;
&lt;/iq&gt;
  </PRE></DIV>
<P>If one of the parties attempts to send information over the unsecured XMPP 
signalling channel that the other party expects to receive over the encrypted 
data channel, the receiving party SHOULD return a &lt;not-acceptable/&gt; error 
to the sender, including a &lt;security-required/&gt; element qualified by the 
'urn:xmpp:jingle:errors:1' namespace. An example follows.</P>
<P class=caption><A id=example-37 name=example-37></A>Example 37. Initiator 
sends security-required error</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='romeo@montague.lit/orchard'
    id='bsi381f5'
    to='juliet@capulet.lit/balcony'
    type='error'&gt;
  &lt;error type='cancel'&gt;
    &lt;not-acceptable xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/&gt;
    &lt;security-required xmlns='urn:xmpp:jingle:errors:1'/&gt;
  &lt;/error&gt;
&lt;/iq&gt;
  </PRE></DIV>
<H2>10. <A id=errors name=errors>Error Handling</A></H2>
<P>The Jingle-specific error conditions are as follows. These condition elements 
are qualified by the 'urn:xmpp:jingle:errors:1' namespace (see <A 
href="http://xmpp.org/extensions/xep-0166.html#registrar-versioning">Namespace 
Versioning</A> regarding the possibility of incrementing the version 
number).</P>
<DIV class=indent>
<P class=caption><A id=table-4 name=table-4></A>Table 4: Error Conditions</P>
<TABLE border=1 cellSpacing=0 cellPadding=3>
  <TBODY>
  <TR class=body>
    <TH>Jingle Condition</TH>
    <TH>XMPP Condition</TH>
    <TH>Description</TH></TR>
  <TR class=body>
    <TD>&lt;out-of-order/&gt;</TD>
    <TD>&lt;unexpected-request/&gt;</TD>
    <TD>The request cannot occur at this point in the state machine (e.g., 
      session-initiate after session-accept).</TD></TR>
  <TR class=body>
    <TD>&lt;tie-break/&gt;</TD>
    <TD>&lt;conflict/&gt;</TD>
    <TD>The request is rejected because it was sent while the initiator was 
      awaiting a reply on a similar request.</TD></TR>
  <TR class=body>
    <TD>&lt;unknown-session/&gt;</TD>
    <TD>&lt;item-not-found/&gt;</TD>
    <TD>The 'sid' attribute specifies a session that is unknown to the 
      recipient (e.g., no longer live according to the recipient's state machine 
      because the recipient previously terminated the session).</TD></TR>
  <TR class=body>
    <TD>&lt;unsupported-info/&gt;</TD>
    <TD>&lt;feature-not-implemented/&gt;</TD>
    <TD>The recipient does not support the informational payload of a 
      session-info action.</TD></TR></TBODY></TABLE></DIV>
<H2>11. <A id=support name=support>Determining Support</A></H2>
<P>If an entity supports Jingle, it MUST advertise that fact by returning a 
feature of "urn:xmpp:jingle:1" (see <A 
href="http://xmpp.org/extensions/xep-0166.html#registrar-versioning">Namespace 
Versioning</A> regarding the possibility of incrementing the version number) in 
response to a <SPAN class=ref><A 
href="http://xmpp.org/extensions/xep-0030.html">Service Discovery</A></SPAN> [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id346311">32</A>] information 
request. The response MUST also include features for the application formats and 
transport methods supported by the responding entity, as described in the 
relevant specifications.</P>
<P class=caption><A id=example-38 name=example-38></A>Example 38. Service 
Discovery Information Request</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='kingclaudius@shakespeare.lit/castle'
    id='ku6e51v3'
    to='laertes@shakespeare.lit/castle'
    type='get'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'/&gt;
&lt;/iq&gt;
  </PRE></DIV>
<P class=caption><A id=example-39 name=example-39></A>Example 39. Service 
Discovery Information Response</P>
<DIV class=indent><PRE class=prettyprint>&lt;iq from='laertes@shakespeare.lit/castle'
    id='ku6e51v3'
    to='kingclaudius@shakespeare.lit/castle'
    type='result'&gt;
  &lt;query xmlns='http://jabber.org/protocol/disco#info'&gt;
    &lt;feature var='urn:xmpp:jingle:1'/&gt;
    &lt;feature var='urn:xmpp:jingle:apps:rtp:1'/&gt;
    &lt;feature var='urn:xmpp:jingle:apps:rtp:audio'/&gt;
    &lt;feature var='urn:xmpp:jingle:apps:rtp:video'/&gt;
  &lt;/query&gt;
&lt;/iq&gt;
  </PRE></DIV>
<P>In order for an application to determine whether an entity supports this 
protocol, where possible it SHOULD use the dynamic, presence-based profile of 
service discovery defined in <SPAN class=ref><A 
href="http://xmpp.org/extensions/xep-0115.html">Entity Capabilities</A></SPAN> 
[<A href="http://xmpp.org/extensions/xep-0166.html#nt-id346354">33</A>]. 
However, if an application has not received entity capabilities information from 
an entity, it SHOULD use explicit service discovery instead.</P>
<H2>12. <A id=conformance name=conformance>Conformance by Using 
Protocols</A></H2>
<DIV class=indent>
<H3>12.1 <A id=conformance-apps name=conformance-apps>Application 
Formats</A></H3>
<P>A document that specifies a Jingle application format (e.g., RTP sessions) 
MUST define:</P>
<OL>
  <LI>How successful application format negotiation occurs.</LI>
  <LI>A &lt;description/&gt; element and associated semantics for representing 
  the application format.</LI>
  <LI>If and how the application format can be mapped to the Session Description 
  Protocol, including the appropriate SDP media type (see Section 8.2.1 of <SPAN 
  class=ref>RFC 4566</SPAN>).</LI>
  <LI>Whether the media data for the application format shall be sent over a 
  streaming transport method or a datagram transport method (or, if both, which 
  is preferred).</LI>
  <LI>If the chosen transport handles "components", define how the components 
  shall be identified and assigned.</LI>
  <LI>Exactly how the media data is to be sent and received over a streaming or 
  datagram transport.</LI></OL></DIV>
<DIV class=indent>
<H3>12.2 <A id=conformance-transports name=conformance-transports>Transport 
Methods</A></H3>
<P>A document that specifies a Jingle transport method (e.g., raw UDP) MUST 
define:</P>
<OL>
  <LI>How successful transport negotiation occurs.</LI>
  <LI>A &lt;transport/&gt; element and associated semantics for representing the 
  transport method.</LI>
  <LI>Whether the transport is a streaming method or a datagram method.</LI>
  <LI>If the transport supports multiple components.</LI></OL></DIV>
<DIV class=indent>
<H3>12.3 <A id=conformance-preconditions name=conformance-preconditions>Security 
Preconditions</A></H3>
<P>A document that specifies a Jingle security precondition MUST define:</P>
<OL>
  <LI>A &lt;security/&gt; element and associated semantics for representing the 
  security precondition.</LI>
  <LI>Whether the security precondition applies to streaming transport methods, 
  datagram transport methods, or both.</LI>
  <LI>When the precondition is met so that application data can be sent over the 
  negotiated transport.</LI></OL></DIV>
<H2>13. <A id=security name=security>Security Considerations</A></H2>
<DIV class=indent>
<H3>13.1 <A id=security-transport name=security-transport>Transport 
Security</A></H3>
<P>It is strongly recommended to protect the transport method using an 
appropriate security precondition (e.g., Transport Layer Security). However, 
methods for doing so are out of scope for this specification.</P></DIV>
<DIV class=indent>
<H3>13.2 <A id=security-dos name=security-dos>Denial of Service</A></H3>
<P>Jingle sessions can be resource-intensive. Therefore, it is possible to 
launch a denial-of-service attack against an entity by burdening it with too 
many Jingle sessions. Care MUST be taken to accept sessions only from known 
entities and only if the entity's device is able to process such 
sessions.</P></DIV>
<DIV class=indent>
<H3>13.3 <A id=security-gateways name=security-gateways>Communication Through 
Gateways</A></H3>
<P>Jingle communications can be enabled through gateways to non-XMPP networks, 
whose security characteristics can be quite different from those of XMPP 
networks. (For example, on some SIP networks authentication is optional and 
"from" addresses can be easily forged.) Care MUST be taken in communicating 
through such gateways.</P></DIV>
<DIV class=indent>
<H3>13.4 <A id=security-info name=security-info>Information Exposure</A></H3>
<P>Mere negotiation of a Jingle session can expose sensitive information about 
the parties (e.g., IP addresses, or even the full JID of the responder). Care 
MUST be taken in communicating such information, and end-to-end encryption 
SHOULD be used if the parties do not trust the intermediate servers or 
gateways.</P></DIV>
<DIV class=indent>
<H3>13.5 <A id=security-redirect name=security-redirect>Redirection</A></H3>
<P>The 'initiator' and 'responder' attributes can be used to redirect a session 
from one JID to anther JID (i.e., the 'initiator' or 'responder' attribute might 
not match the 'from' or 'to' attribute of the sender). An application SHOULD NOT 
accept the redirection unless the bare JIDs match (i.e., the session is being 
redirected from one authorized resource to another authorized resource 
associated with the same account).</P></DIV>
<H2>14. <A id=iana name=iana>IANA Considerations</A></H2>
<P>This document requires no interaction with the <SPAN class=ref><A 
href="http://www.iana.org/">Internet Assigned Numbers Authority 
(IANA)</A></SPAN> [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id346567">34</A>].</P>
<H2>15. <A id=registrar name=registrar>XMPP Registrar Considerations</A></H2>
<DIV class=indent>
<H3>15.1 <A id=registrar-ns name=registrar-ns>Protocol Namespaces</A></H3>
<P>This specification defines the following XML namespaces:</P>
<UL>
  <LI>urn:xmpp:jingle:1</LI>
  <LI>urn:xmpp:jingle:errors:1</LI></UL>
<P>The <SPAN class=ref><A href="http://xmpp.org/registrar/">XMPP 
Registrar</A></SPAN> [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id346606">35</A>] includes the 
foregoing namespaces in its registry at &lt;<A 
href="http://xmpp.org/registrar/namespaces.html">http://xmpp.org/registrar/namespaces.html</A>&gt;, 
as governed by <SPAN class=ref><A 
href="http://xmpp.org/extensions/xep-0053.html">XMPP Registrar 
Function</A></SPAN> [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id346659">36</A>].</P></DIV>
<DIV class=indent>
<H3>15.2 <A id=registrar-versioning name=registrar-versioning>Namespace 
Versioning</A></H3>
<P>If the protocol defined in this specification undergoes a revision that is 
not fully backwards-compatible with an older version, the XMPP Registrar shall 
increment the protocol version number found at the end of the XML namespaces 
defined herein, as described in Section 4 of <SPAN 
class=ref>XEP-0053</SPAN>.</P></DIV>
<DIV class=indent>
<H3>15.3 <A id=registrar-apps name=registrar-apps>Jingle Application Formats 
Registry</A></H3>
<P>The XMPP Registrar maintains a registry of Jingle application formats at 
&lt;<A 
href="http://xmpp.org/registrar/jingle-apps.html">http://xmpp.org/registrar/jingle-apps.html</A>&gt;. 
All application format registrations shall be defined in separate specifications 
(not in this document). Application types defined within the XEP series MUST be 
registered with the XMPP Registrar, resulting in protocol URNs of the form 
"urn:xmpp:jingle:app:name:X" (where "name" is the registered name of the 
application format and "X" is a non-negative integer).</P>
<P>In order to submit new values to this registry, the registrant shall define 
an XML fragment of the following form and either include it in the relevant XMPP 
Extension Protocol or send it to the email address 
&lt;registrar@xmpp.org&gt;:</P>
<P class=caption></P>
<DIV class=indent><PRE class=prettyprint>&lt;application&gt;
  &lt;name&gt;The name of the application format.&lt;/name&gt;
  &lt;desc&gt;A natural-language summary of the application format.&lt;/desc&gt;
  &lt;transport&gt;
    Whether the media can be sent over a "streaming" transport, 
    a "datagram" transport, or "both".
  &lt;/transport&gt;
  &lt;doc&gt;The document in which the application format is specified.&lt;/doc&gt;
&lt;/application&gt;
    </PRE></DIV></DIV>
<DIV class=indent>
<H3>15.4 <A id=registrar-transports name=registrar-transports>Jingle Transport 
Methods Registry</A></H3>
<P>The XMPP Registrar maintains a registry of Jingle transport methods at &lt;<A 
href="http://xmpp.org/registrar/jingle-transports.html">http://xmpp.org/registrar/jingle-transports.html</A>&gt;. 
All transport method registrations shall be defined in separate specifications 
(not in this document). Transport methods defined within the XEP series MUST be 
registered with the XMPP Registrar, resulting in protocol URNs of the form 
"urn:xmpp:jingle:transport:name" (where "name" is the registered name of the 
transport method).</P>
<P>In order to submit new values to this registry, the registrant shall define 
an XML fragment of the following form and either include it in the relevant XMPP 
Extension Protocol or send it to the email address 
&lt;registrar@xmpp.org&gt;:</P>
<P class=caption></P>
<DIV class=indent><PRE class=prettyprint>&lt;transport&gt;
  &lt;name&gt;The name of the transport method.&lt;/name&gt;
  &lt;desc&gt;A natural-language summary of the transport method.&lt;/desc&gt;
  &lt;type&gt;
    Whether the transport method can be "streaming", "datagram", 
    or "both".
  &lt;/type&gt;
  &lt;doc&gt;The document in which this transport method is specified.&lt;/doc&gt;
&lt;/transport&gt;
    </PRE></DIV></DIV>
<H2>16. <A id=schema name=schema>XML Schemas</A></H2>
<DIV class=indent>
<H3>16.1 <A id=schema-jingle name=schema-jingle>Jingle</A></H3>
<P class=caption></P>
<DIV class=indent><PRE class=prettyprint>&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='urn:xmpp:jingle:1'
    xmlns='urn:xmpp:jingle:1'
    elementFormDefault='qualified'&gt;

  &lt;xs:annotation&gt;
    &lt;xs:documentation&gt;
      The protocol documented by this schema is defined in
      XEP-0166: http://www.xmpp.org/extensions/xep-0166.html
    &lt;/xs:documentation&gt;
  &lt;/xs:annotation&gt;

  &lt;xs:element name='jingle'&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name='content' 
                    type='contentElementType'
                    minOccurs='0' 
                    maxOccurs='unbounded'/&gt;
        &lt;xs:element name='reason' 
                    type='reasonElementType'
                    minOccurs='0' 
                    maxOccurs='1'/&gt;
        &lt;xs:any namespace='##other' minOccurs='0' maxOccurs='unbounded'/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:attribute name='action' use='required'&gt;
        &lt;xs:simpleType&gt;
          &lt;xs:restriction base='xs:NCName'&gt;
            &lt;xs:enumeration value='content-accept'/&gt;
            &lt;xs:enumeration value='content-add'/&gt;
            &lt;xs:enumeration value='content-modify'/&gt;
            &lt;xs:enumeration value='content-reject'/&gt;
            &lt;xs:enumeration value='content-remove'/&gt;
            &lt;xs:enumeration value='description-info'/&gt;
            &lt;xs:enumeration value='security-info'/&gt;
            &lt;xs:enumeration value='session-accept'/&gt;
            &lt;xs:enumeration value='session-info'/&gt;
            &lt;xs:enumeration value='session-initiate'/&gt;
            &lt;xs:enumeration value='session-terminate'/&gt;
            &lt;xs:enumeration value='transport-accept'/&gt;
            &lt;xs:enumeration value='transport-info'/&gt;
            &lt;xs:enumeration value='transport-reject'/&gt;
            &lt;xs:enumeration value='transport-replace'/&gt;
          &lt;/xs:restriction&gt;
        &lt;/xs:simpleType&gt;
      &lt;/xs:attribute&gt;
      &lt;xs:attribute name='initiator' type='xs:string' use='optional'/&gt;
      &lt;xs:attribute name='responder' type='xs:string' use='optional'/&gt;
      &lt;xs:attribute name='sid' type='xs:NMTOKEN' use='required'/&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:complexType name='alternativeSessionElementType'&gt;
    &lt;xs:sequence&gt;
      &lt;xs:element name='sid'
                  minOccurs='0'
                  maxOccurs='1'
                  type='xs:NMTOKEN'/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name='contentElementType'&gt;
    &lt;xs:sequence&gt;
      &lt;xs:any namespace='##other' minOccurs='0' maxOccurs='unbounded'/&gt;
    &lt;/xs:sequence&gt;
    &lt;xs:attribute name='creator'
                  use='required'&gt;
      &lt;xs:simpleType&gt;
        &lt;xs:restriction base='xs:NCName'&gt;
          &lt;xs:enumeration value='initiator'/&gt;
          &lt;xs:enumeration value='responder'/&gt;
        &lt;/xs:restriction&gt;
      &lt;/xs:simpleType&gt;
    &lt;/xs:attribute&gt;
    &lt;xs:attribute name='disposition'
                  use='optional'
                  type='xs:NCName'
                  default='session'/&gt;
    &lt;xs:attribute name='name'
                  use='required'
                  type='xs:string'/&gt;
    &lt;xs:attribute name='senders'
                  use='optional'
                  default='both'&gt;
      &lt;xs:simpleType&gt;
        &lt;xs:restriction base='xs:NCName'&gt;
          &lt;xs:enumeration value='both'/&gt;
          &lt;xs:enumeration value='initiator'/&gt;
          &lt;xs:enumeration value='none'/&gt;
          &lt;xs:enumeration value='responder'/&gt;
        &lt;/xs:restriction&gt;
      &lt;/xs:simpleType&gt;
    &lt;/xs:attribute&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name='reasonElementType'&gt;
    &lt;xs:sequence&gt;
      &lt;xs:choice&gt;
        &lt;xs:element name='alternative-session' 
                    type='alternativeSessionElementType'/&gt;
        &lt;xs:element name='busy' type='empty'/&gt;
        &lt;xs:element name='cancel' type='empty'/&gt;
        &lt;xs:element name='connectivity-error' type='empty'/&gt;
        &lt;xs:element name='decline' type='empty'/&gt;
        &lt;xs:element name='expired' type='empty'/&gt;
        &lt;xs:element name='failed-application' type='empty'/&gt;
        &lt;xs:element name='failed-transport' type='empty'/&gt;
        &lt;xs:element name='general-error' type='empty'/&gt;
        &lt;xs:element name='gone' type='empty'/&gt;
        &lt;xs:element name='incompatible-parameters' type='empty'/&gt;
        &lt;xs:element name='media-error' type='empty'/&gt;
        &lt;xs:element name='security-error' type='empty'/&gt;
        &lt;xs:element name='success' type='empty'/&gt;
        &lt;xs:element name='timeout' type='empty'/&gt;
        &lt;xs:element name='unsupported-applications' type='empty'/&gt;
        &lt;xs:element name='unsupported-transports' type='empty'/&gt;
      &lt;/xs:choice&gt;
      &lt;xs:element name='text' type='xs:string' minOccurs='0' maxOccurs='1'/&gt;
      &lt;xs:any namespace='##other' minOccurs='0' maxOccurs='1'/&gt;
    &lt;/xs:sequence&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:simpleType name='empty'&gt;
    &lt;xs:restriction base='xs:string'&gt;
      &lt;xs:enumeration value=''/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

&lt;/xs:schema&gt;
    </PRE></DIV></DIV>
<DIV class=indent>
<H3>16.2 <A id=schema-errors name=schema-errors>Jingle Errors</A></H3>
<P class=caption></P>
<DIV class=indent><PRE class=prettyprint>&lt;?xml version='1.0' encoding='UTF-8'?&gt;

&lt;xs:schema
    xmlns:xs='http://www.w3.org/2001/XMLSchema'
    targetNamespace='urn:xmpp:jingle:errors:1'
    xmlns='urn:xmpp:jingle:errors:1'
    elementFormDefault='qualified'&gt;

  &lt;xs:annotation&gt;
    &lt;xs:documentation&gt;
      The protocol documented by this schema is defined in
      XEP-0166: http://www.xmpp.org/extensions/xep-0166.html
    &lt;/xs:documentation&gt;
  &lt;/xs:annotation&gt;

  &lt;xs:element name='out-of-order' type='empty'/&gt;
  &lt;xs:element name='tie-break' type='empty'/&gt;
  &lt;xs:element name='unknown-session' type='empty'/&gt;
  &lt;xs:element name='unsupported-info' type='empty'/&gt;

  &lt;xs:simpleType name='empty'&gt;
    &lt;xs:restriction base='xs:string'&gt;
      &lt;xs:enumeration value=''/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

&lt;/xs:schema&gt;
    </PRE></DIV></DIV>
<H2>17. <A id=history name=history>History</A></H2>
<P>Until Jingle was developed, there existed no widely-adopted standard for 
initiating and managing peer-to-peer interactions between XMPP entities. 
Although several large service providers and Jabber client teams had written and 
implemented their own proprietary XMPP extensions for peer-to-peer signalling 
(usually only for voice), those technologies were not open and did not always 
take into account requirements to interoperate with SIP-based technologies. The 
only existing open protocol was <SPAN class=ref><A 
href="http://xmpp.org/extensions/xep-0111.html">A Transport for Initiating and 
Negotiating Sessions</A></SPAN> [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id346864">37</A>], which made 
it possible to initiate and manage peer-to-peer sessions, but which did not 
provide enough of the key signalling semantics to be easily implemented in 
Jabber/XMPP clients. [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id346808">38</A>]</P>
<P>The result was an unfortunate fragmentation within the XMPP community 
regarding signalling protocols. Essentially, there were two possible approaches 
to solving the problem:</P>
<OL>
  <LI>Recommend that all client developers implement a dual-stack (XMPP + SIP) 
  solution.</LI>
  <LI>Define a full-featured protocol for XMPP signalling.</LI></OL>
<P>Implementation experience indicates that a dual-stack approach might not be 
feasible on all the computing platforms for which Jabber clients have been 
written, or even desirable on platforms where it is feasible. [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id346887">39</A>] Therefore, 
it seemed reasonable to define an XMPP signalling protocol that could provide 
the necessary session management semantics while also making it relatively 
straightforward to interoperate with existing Internet standards.</P>
<P>As a result of feedback received on <SPAN class=ref>XEP-0111</SPAN>, the 
original authors of this document (Joe Hildebrand and Peter Saint-Andre) began 
to define such a signalling protocol, code-named Jingle. Upon communication with 
members of the Google Talk team, [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id346901">40</A>] it was 
discovered that the emerging Jingle approach was conceptually (and even 
syntactically) quite similar to the signalling protocol used in the Google Talk 
application. Therefore, in the interest of interoperability and adoption, we 
decided to harmonize the two approaches. The signalling protocol specified 
herein is, therefore, substantially equivalent to the original Google Talk 
protocol, with several adjustments based on feedback received from implementors 
as well as for publication by the XMPP Standards Foundation.</P>
<H2>18. <A id=ack name=ack>Acknowledgements</A></H2>
<P>The authors would like to thank Rohan Mahy for his valuable input on early 
versions of the Jingle specifications. Thiago Camargo, Diana Cionoiu, Olivier 
Crête, Dafydd Harries, Antti Ijäs, Tim Julien, Lauri Kaila, Justin Karneges, 
Jussi Laako, Steffen Larsen, Marcus Lundblad, Dirk Meyer, Anthony Minessale, 
Akito Nozaki, Matt O'Gorman, Mike Ruprecht, Rob Taylor, Will Thompson, Matt 
Tucker, Justin Uberti, Saku Vainio, Unnikrishnan Vikrama Panicker, Brian West, 
Jeff Williams, and others have also provided helpful input. Thanks also to those 
who have commented on the <SPAN class=ref><A 
href="http://mail.jabber.org/mailman/listinfo/standards/">Standards 
SIG</A></SPAN> [<A 
href="http://xmpp.org/extensions/xep-0166.html#nt-id346958">41</A>] and Jingle 
[<A href="http://xmpp.org/extensions/xep-0166.html#nt-id346971">42</A>] mailing 
lists.</P>
<HR>
<A id=appendices name=appendices></A>
<H2>Appendices</H2>
<HR>
<A id=appendix-docinfo name=appendix-docinfo></A>
<H3>Appendix A: Document Information</H3>
<P class=indent>Series: <A href="http://xmpp.org/extensions/">XEP</A><BR>Number: 
0166<BR>Publisher: <A href="http://xmpp.org/xsf/">XMPP Standards 
Foundation</A><BR>Status: <A 
href="http://xmpp.org/extensions/xep-0001.html#states-Draft">Draft</A><BR>Type: 
<A 
href="http://xmpp.org/extensions/xep-0001.html#types-Standards Track">Standards 
Track</A><BR>Version: 1.1<BR>Last Updated: 2009-12-23<BR>Approving Body: <A 
href="http://xmpp.org/council/">XMPP Council</A><BR>Dependencies: XMPP 
Core<BR>Supersedes: None<BR>Superseded By: None<BR>Short Name: jingle<BR>XML 
Schema for jingle namespace: &lt;<A 
href="http://xmpp.org/schemas/jingle.xsd">http://xmpp.org/schemas/jingle.xsd</A>&gt;<BR>XML 
Schema for jingle:errors namespace: &lt;<A 
href="http://xmpp.org/schemas/jingle-errors.xsd">http://xmpp.org/schemas/jingle-errors.xsd</A>&gt;<BR>Registry: 
&lt;<A 
href="http://xmpp.org/registrar/jingle.html">http://xmpp.org/registrar/jingle.html</A>&gt; 
<BR>Source Control: <A class=standardsButton 
href="http://svn.xmpp.org:18080/browse/XMPP/trunk/extensions/xep-0166.xml">HTML</A>&nbsp; 
<A class=standardsButton 
href="http://svn.xmpp.org:18080//changelog/~rss/XMPP/trunk/extensions/xep-0166.xml/rss.xml">RSS</A><BR>This 
document in other formats: <A class=standardsButton 
href="http://xmpp.org/extensions/xep-0166.xml">XML</A>&nbsp; <A 
class=standardsButton href="http://xmpp.org/extensions/xep-0166.pdf">PDF</A></P>
<HR>
<A id=appendix-authorinfo name=appendix-authorinfo></A>
<H3>Appendix B: Author Information</H3>
<DIV class=indent>
<H3>Scott Ludwig</H3>
<P class=indent>Email: <A 
href="mailto:scottlu@google.com">scottlu@google.com</A><BR>JabberID: <A 
href="xmpp:scottlu@google.com">xmpp:scottlu@google.com</A><BR></P>
<H3>Joe Beda</H3>
<P class=indent>Email: <A 
href="mailto:jbeda@google.com">jbeda@google.com</A><BR>JabberID: <A 
href="xmpp:jbeda@google.com">xmpp:jbeda@google.com</A><BR></P>
<H3>Peter Saint-Andre</H3>
<P class=indent>Email: <A 
href="mailto:stpeter@jabber.org">stpeter@jabber.org</A><BR>JabberID: <A 
href="xmpp:stpeter@jabber.org">xmpp:stpeter@jabber.org</A><BR>URI: <A 
href="https://stpeter.im/">https://stpeter.im/</A><BR></P>
<H3>Robert McQueen</H3>
<P class=indent>Email: <A 
href="mailto:robert.mcqueen@collabora.co.uk">robert.mcqueen@collabora.co.uk</A><BR>JabberID: 
<A 
href="xmpp:robert.mcqueen@collabora.co.uk">xmpp:robert.mcqueen@collabora.co.uk</A><BR></P>
<H3>Sean Egan</H3>
<P class=indent>Email: <A 
href="mailto:seanegan@google.com">seanegan@google.com</A><BR>JabberID: <A 
href="xmpp:seanegan@google.com">xmpp:seanegan@google.com</A><BR></P>
<H3>Joe Hildebrand</H3>
<P class=indent>Email: <A 
href="mailto:jhildebr@cisco.com">jhildebr@cisco.com</A><BR>JabberID: <A 
href="xmpp:hildjj@jabber.org">xmpp:hildjj@jabber.org</A><BR></P></DIV>
<HR>
<A id=appendix-legal name=appendix-legal></A>
<H3>Appendix C: Legal Notices</H3>
<DIV class=indent>
<H4>Copyright</H4>This XMPP Extension Protocol is copyright © 1999 - 2010 by the 
<A href="http://xmpp.org/">XMPP Standards Foundation</A> (XSF).
<H4>Permissions</H4>Permission is hereby granted, free of charge, to any person 
obtaining a copy of this specification (the "Specification"), to make use of the 
Specification without restriction, including without limitation the rights to 
implement the Specification in a software program, deploy the Specification in a 
network service, and copy, modify, merge, publish, translate, distribute, 
sublicense, or sell copies of the Specification, and to permit persons to whom 
the Specification is furnished to do so, subject to the condition that the 
foregoing copyright notice and this permission notice shall be included in all 
copies or substantial portions of the Specification. Unless separate permission 
is granted, modified works that are redistributed shall not contain misleading 
information regarding the authors, title, number, or publisher of the 
Specification, and shall not claim endorsement of the modified works by the 
authors, any organization or project to which the authors belong, or the XMPP 
Standards Foundation.
<H4>Disclaimer of Warranty</H4><SPAN style="FONT-WEIGHT: bold">## NOTE WELL: 
This Specification is provided on an "AS IS" BASIS, WITHOUT WARRANTIES OR 
CONDITIONS OF ANY KIND, express or implied, including, without limitation, any 
warranties or conditions of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS 
FOR A PARTICULAR PURPOSE. ##</SPAN>
<H4>Limitation of Liability</H4>In no event and under no legal theory, whether 
in tort (including negligence), contract, or otherwise, unless required by 
applicable law (such as deliberate and grossly negligent acts) or agreed to in 
writing, shall the XMPP Standards Foundation or any author of this Specification 
be liable for damages, including any direct, indirect, special, incidental, or 
consequential damages of any character arising from, out of, or in connection 
with the Specification or the implementation, deployment, or other use of the 
Specification (including but not limited to damages for loss of goodwill, work 
stoppage, computer failure or malfunction, or any and all other commercial 
damages or losses), even if the XMPP Standards Foundation or such author has 
been advised of the possibility of such damages.
<H4>IPR Conformance</H4>This XMPP Extension Protocol has been contributed in 
full conformance with the XSF's Intellectual Property Rights Policy (a copy of 
which can be found at &lt;<A 
href="http://xmpp.org/extensions/ipr-policy.shtml">http://xmpp.org/extensions/ipr-policy.shtml</A>&gt; 
or obtained by writing to XMPP Standards Foundation, 1899 Wynkoop Street, Suite 
600, Denver, CO 80202 USA).</DIV>
<HR>
<A id=appendix-xmpp name=appendix-xmpp></A>
<H3>Appendix D: Relation to XMPP</H3>
<P class=indent>The Extensible Messaging and Presence Protocol (XMPP) is defined 
in the XMPP Core (RFC 3920) and XMPP IM (RFC 3921) specifications contributed by 
the XMPP Standards Foundation to the Internet Standards Process, which is 
managed by the Internet Engineering Task Force in accordance with RFC 2026. Any 
protocol defined in this document has been developed outside the Internet 
Standards Process and is to be understood as an extension to XMPP rather than as 
an evolution, development, or modification of XMPP itself.</P>
<HR>
<A id=appendix-discuss name=appendix-discuss></A>
<H3>Appendix E: Discussion Venue</H3>
<P class=indent>There exists a special venue for discussion related to the 
technology described in this document: the &lt;<A 
href="http://mail.jabber.org/mailman/listinfo/jingle">http://mail.jabber.org/mailman/listinfo/jingle</A>&gt; 
mailing list.</P>
<P class=indent>The primary venue for discussion of XMPP Extension Protocols is 
the &lt;<A 
href="http://mail.jabber.org/mailman/listinfo/standards">http://mail.jabber.org/mailman/listinfo/standards</A>&gt; 
discussion list.</P>
<P class=indent>Discussion on other xmpp.org discussion lists might also be 
appropriate; see &lt;<A 
href="http://xmpp.org/about/discuss.shtml">http://xmpp.org/about/discuss.shtml</A>&gt; 
for a complete list.</P>
<P class=indent>Errata can be sent to &lt;<A 
href="mailto:editor@xmpp.org">editor@xmpp.org</A>&gt;.</P>
<HR>
<A id=appendix-conformance name=appendix-conformance></A>
<H3>Appendix F: Requirements Conformance</H3>
<P class=indent>The following requirements keywords as used in this document are 
to be interpreted as described in <A 
href="http://www.ietf.org/rfc/rfc2119.txt">RFC 2119</A>: "MUST", "SHALL", 
"REQUIRED"; "MUST NOT", "SHALL NOT"; "SHOULD", "RECOMMENDED"; "SHOULD NOT", "NOT 
RECOMMENDED"; "MAY", "OPTIONAL".</P>
<HR>
<A id=appendix-notes name=appendix-notes></A>
<H3>Appendix G: Notes</H3>
<DIV class=indent>
<P><A id=nt-id343338 name=nt-id343338>1</A>. XEP-0167: Jingle RTP Sessions 
&lt;<A 
href="http://xmpp.org/extensions/xep-0167.html">http://xmpp.org/extensions/xep-0167.html</A>&gt;.</P>
<P><A id=nt-id343362 name=nt-id343362>2</A>. XEP-0234: Jingle File Transfer 
&lt;<A 
href="http://xmpp.org/extensions/xep-0234.html">http://xmpp.org/extensions/xep-0234.html</A>&gt;.</P>
<P><A id=nt-id343384 name=nt-id343384>3</A>. XEP-0247: Jingle XML Streams &lt;<A 
href="http://xmpp.org/extensions/xep-0247.html">http://xmpp.org/extensions/xep-0247.html</A>&gt;.</P>
<P><A id=nt-id343406 name=nt-id343406>4</A>. RFC 768: User Datagram Protocol 
&lt;<A 
href="http://tools.ietf.org/html/rfc0768">http://tools.ietf.org/html/rfc0768</A>&gt;.</P>
<P><A id=nt-id343428 name=nt-id343428>5</A>. XEP-0177: Jingle Raw UDP Transport 
Method &lt;<A 
href="http://xmpp.org/extensions/xep-0177.html">http://xmpp.org/extensions/xep-0177.html</A>&gt;.</P>
<P><A id=nt-id343450 name=nt-id343450>6</A>. XEP-0176: Jingle ICE-UDP Transport 
Method &lt;<A 
href="http://xmpp.org/extensions/xep-0176.html">http://xmpp.org/extensions/xep-0176.html</A>&gt;.</P>
<P><A id=nt-id343470 name=nt-id343470>7</A>. RFC 793: Transmission Control 
Protocol &lt;<A 
href="http://tools.ietf.org/html/rfc0793">http://tools.ietf.org/html/rfc0793</A>&gt;.</P>
<P><A id=nt-id343485 name=nt-id343485>8</A>. XEP-0065: SOCKS5 Bytestreams &lt;<A 
href="http://xmpp.org/extensions/xep-0065.html">http://xmpp.org/extensions/xep-0065.html</A>&gt;.</P>
<P><A id=nt-id343508 name=nt-id343508>9</A>. XEP-0260: Jingle SOCKS5 Bytestreams 
Transport Method &lt;<A 
href="http://xmpp.org/extensions/xep-0260.html">http://xmpp.org/extensions/xep-0260.html</A>&gt;.</P>
<P><A id=nt-id343528 name=nt-id343528>10</A>. XEP-0047: In-Band Bytestreams 
&lt;<A 
href="http://xmpp.org/extensions/xep-0047.html">http://xmpp.org/extensions/xep-0047.html</A>&gt;.</P>
<P><A id=nt-id343545 name=nt-id343545>11</A>. XEP-0261: Jingle In-Band 
Bytestreams Transport Method &lt;<A 
href="http://xmpp.org/extensions/xep-0261.html">http://xmpp.org/extensions/xep-0261.html</A>&gt;.</P>
<P><A id=nt-id343573 name=nt-id343573>12</A>. RFC 5246: The Transport Layer 
Security (TLS) Protocol Version 1.2 &lt;<A 
href="http://tools.ietf.org/html/rfc5246">http://tools.ietf.org/html/rfc5246</A>&gt;.</P>
<P><A id=nt-id343593 name=nt-id343593>13</A>. RFC 4347: Datagram Transport Layer 
Security &lt;<A 
href="http://tools.ietf.org/html/rfc4347">http://tools.ietf.org/html/rfc4347</A>&gt;.</P>
<P><A id=nt-id343615 name=nt-id343615>14</A>. The XMPP Standards Foundation 
(XSF) is an independent, non-profit membership organization that develops open 
extensions to the IETF's Extensible Messaging and Presence Protocol (XMPP). For 
further information, see &lt;<A 
href="http://xmpp.org/xsf/">http://xmpp.org/xsf/</A>&gt;.</P>
<P><A id=nt-id343639 name=nt-id343639>15</A>. The Internet Engineering Task 
Force is the principal body engaged in the development of new Internet standard 
specifications, best known for its work on standards such as HTTP and SMTP. For 
further information, see &lt;<A 
href="http://www.ietf.org/">http://www.ietf.org/</A>&gt;.</P>
<P><A id=nt-id343671 name=nt-id343671>16</A>. RFC 3261: Session Initiation 
Protocol (SIP) &lt;<A 
href="http://tools.ietf.org/html/rfc3261">http://tools.ietf.org/html/rfc3261</A>&gt;.</P>
<P><A id=nt-id343688 name=nt-id343688>17</A>. Naturally, more complex scenarios 
are possible; such scenarios are described in other specifications, such as 
<SPAN class=ref>Jingle RTP Sessions</SPAN> for voice and video chat.</P>
<P><A id=nt-id344000 name=nt-id344000>18</A>. RFC 4566: SDP: Session Description 
Protocol &lt;<A 
href="http://tools.ietf.org/html/rfc4566">http://tools.ietf.org/html/rfc4566</A>&gt;.</P>
<P><A id=nt-id344049 name=nt-id344049>19</A>. Extensible Messaging and Presence 
Protocol (XMPP) End-to-End Encryption Using Transport Layer Security ("XTLS") 
&lt;<A 
href="http://tools.ietf.org/html/draft-meyer-xmpp-e2e-encryption">http://tools.ietf.org/html/draft-meyer-xmpp-e2e-encryption</A>&gt;.</P>
<P><A id=nt-id344075 name=nt-id344075>20</A>. ITU Recommendation H.323: 
Packet-based Multimedia Communications Systems (September 1999).</P>
<P><A id=nt-id344092 name=nt-id344092>21</A>. Interworking between the Session 
Initiation Protocol (SIP) and the Extensible Messaging and Presence Protocol 
(XMPP): Media Sessions &lt;<A 
href="http://tools.ietf.org/html/draft-saintandre-sip-xmpp-media">http://tools.ietf.org/html/draft-saintandre-sip-xmpp-media</A>&gt; 
(work in progress).</P>
<P><A id=nt-id344649 name=nt-id344649>22</A>. RFC 3921: Extensible Messaging and 
Presence Protocol (XMPP): Instant Messaging and Presence &lt;<A 
href="http://tools.ietf.org/html/rfc3921">http://tools.ietf.org/html/rfc3921</A>&gt;.</P>
<P><A id=nt-id345184 name=nt-id345184>23</A>. XEP-0251: Jingle Session Transfer 
&lt;<A 
href="http://xmpp.org/extensions/xep-0251.html">http://xmpp.org/extensions/xep-0251.html</A>&gt;.</P>
<P><A id=nt-id345226 name=nt-id345226>24</A>. See &lt;<A 
href="http://www.w3.org/TR/2000/WD-xml-2e-20000814#NT-Nmtoken">http://www.w3.org/TR/2000/WD-xml-2e-20000814#NT-Nmtoken</A>&gt;</P>
<P><A id=nt-id345258 name=nt-id345258>25</A>. RFC 4086: Randomness Requirements 
for Security &lt;<A 
href="http://tools.ietf.org/html/rfc4086">http://tools.ietf.org/html/rfc4086</A>&gt;.</P>
<P><A id=nt-id345542 name=nt-id345542>26</A>. XEP-0065: SOCKS5 Bytestreams 
&lt;<A 
href="http://xmpp.org/extensions/xep-0065.html">http://xmpp.org/extensions/xep-0065.html</A>&gt;.</P>
<P><A id=nt-id345560 name=nt-id345560>27</A>. XEP-0047: In-Band Bytestreams 
&lt;<A 
href="http://xmpp.org/extensions/xep-0047.html">http://xmpp.org/extensions/xep-0047.html</A>&gt;.</P>
<P><A id=nt-id345617 name=nt-id345617>28</A>. RFC 4790: Internet Application 
Protocol Collation Registry &lt;<A 
href="http://tools.ietf.org/html/rfc4790">http://tools.ietf.org/html/rfc4790</A>&gt;.</P>
<P><A id=nt-id345734 name=nt-id345734>29</A>. RFC 2183: Communicating 
Presentation Information in Internet Messages: The Content-Disposition Header 
Field &lt;<A 
href="http://tools.ietf.org/html/rfc2183">http://tools.ietf.org/html/rfc2183</A>&gt;.</P>
<P><A id=nt-id345764 name=nt-id345764>30</A>. IANA registry of Mail Content 
Disposition Values and Parameters &lt;<A 
href="http://www.iana.org/assignments/mail-cont-disp">http://www.iana.org/assignments/mail-cont-disp</A>&gt;.</P>
<P><A id=nt-id346123 name=nt-id346123>31</A>. Extensible Messaging and Presence 
Protocol (XMPP) End-to-End Encryption Using Transport Layer Security ("XTLS") 
&lt;<A 
href="http://tools.ietf.org/html/draft-meyer-xmpp-e2e-encryption">http://tools.ietf.org/html/draft-meyer-xmpp-e2e-encryption</A>&gt;.</P>
<P><A id=nt-id346311 name=nt-id346311>32</A>. XEP-0030: Service Discovery &lt;<A 
href="http://xmpp.org/extensions/xep-0030.html">http://xmpp.org/extensions/xep-0030.html</A>&gt;.</P>
<P><A id=nt-id346354 name=nt-id346354>33</A>. XEP-0115: Entity Capabilities 
&lt;<A 
href="http://xmpp.org/extensions/xep-0115.html">http://xmpp.org/extensions/xep-0115.html</A>&gt;.</P>
<P><A id=nt-id346567 name=nt-id346567>34</A>. The Internet Assigned Numbers 
Authority (IANA) is the central coordinator for the assignment of unique 
parameter values for Internet protocols, such as port numbers and URI schemes. 
For further information, see &lt;<A 
href="http://www.iana.org/">http://www.iana.org/</A>&gt;.</P>
<P><A id=nt-id346606 name=nt-id346606>35</A>. The XMPP Registrar maintains a 
list of reserved protocol namespaces as well as registries of parameters used in 
the context of XMPP extension protocols approved by the XMPP Standards 
Foundation. For further information, see &lt;<A 
href="http://xmpp.org/registrar/">http://xmpp.org/registrar/</A>&gt;.</P>
<P><A id=nt-id346659 name=nt-id346659>36</A>. XEP-0053: XMPP Registrar Function 
&lt;<A 
href="http://xmpp.org/extensions/xep-0053.html">http://xmpp.org/extensions/xep-0053.html</A>&gt;.</P>
<P><A id=nt-id346864 name=nt-id346864>37</A>. XEP-0111: A Transport for 
Initiating and Negotiating Sessions &lt;<A 
href="http://xmpp.org/extensions/xep-0111.html">http://xmpp.org/extensions/xep-0111.html</A>&gt;.</P>
<P><A id=nt-id346808 name=nt-id346808>38</A>. It is true that TINS made it 
relatively easy to implement an XMPP-to-SIP gateway; however, in line with the 
long-time Jabber philosophy of "simple clients, complex servers", it would be 
better to force complexity onto the server-side gateway and to keep the client 
as simple as possible.</P>
<P><A id=nt-id346887 name=nt-id346887>39</A>. For example, one large ISP decided 
to switch to a pure XMPP approach after having implemented and deployed a 
dual-stack client for several years.</P>
<P><A id=nt-id346901 name=nt-id346901>40</A>. Google Talk is an instant 
messaging and voice/video chat service and client provided by Google; see &lt;<A 
href="http://www.google.com/talk/">http://www.google.com/talk/</A>&gt;.</P>
<P><A id=nt-id346958 name=nt-id346958>41</A>. The Standards SIG is a standing 
Special Interest Group devoted to development of XMPP Extension Protocols. The 
discussion list of the Standards SIG is the primary venue for discussion of XMPP 
protocol extensions, as well as for announcements by the XMPP Extensions Editor 
and XMPP Registrar. To subscribe to the list or view the list archives, visit 
&lt;<A 
href="http://mail.jabber.org/mailman/listinfo/standards/">http://mail.jabber.org/mailman/listinfo/standards/</A>&gt;.</P>
<P><A id=nt-id346971 name=nt-id346971>42</A>. Before this specification was 
formally accepted by the XMPP Standards Foundation as an XMPP Extension 
Protocol, it was discussed on the semi-private &lt;jingle@jabber.org&gt; mailing 
list. This list has since been resurrected as a special-purpose venue for 
discussion of Jingle protocols and implementation; interested developers can 
subscribe and access the archives at at &lt;<A 
href="http://mail.jabber.org/mailman/listinfo/jingle/">http://mail.jabber.org/mailman/listinfo/jingle/</A>&gt;.</P></DIV>
<HR>
<A id=appendix-revs name=appendix-revs></A>
<H3>Appendix H: Revision History</H3>
<P>Note: Older versions of this specification might be available at <A 
href="http://xmpp.org/extensions/attic/">http://xmpp.org/extensions/attic/</A></P>
<DIV class=indent>
<H4>Version 1.1 (2009-12-23)</H4>
<DIV class=indent>
<P>Specified handling of duplicate name attributes on content element; clarified 
recommended usage of Jingle when exchanging multiple content-types; declared the 
principle that application types ought not to be mixed beyond necessity within a 
single session; clarified use of the reason element in cases other than 
termination.</P>(psa/jjh) </DIV>
<H4>Version 1.0 (2009-06-10)</H4>
<DIV class=indent>
<P>Per a vote of the XMPP Council, advanced specification from Experimental to 
Draft; also required inclusion of the creator attribute per list 
consensus.</P>(psa) </DIV>
<H4>Version 0.38 (2009-05-27)</H4>
<DIV class=indent>
<P>Clarified and tightened handling of the initiator, responder, creator, and 
senders attributes.</P>(psa) </DIV>
<H4>Version 0.37 (2009-04-20)</H4>
<DIV class=indent>
<P>Specified tie-breaking for session-initiate action; incremented errors 
namespace to match core namespace; clarified some ambiguities in the text, 
examples, and state machine.</P>(psa) </DIV>
<H4>Version 0.36 (2009-03-11)</H4>
<DIV class=indent>
<P>Added none value for senders attribute.</P>(psa) </DIV>
<H4>Version 0.35 (2009-03-06)</H4>
<DIV class=indent>
<UL>
  <LI>Added the concept of a security precondition to the Jingle framework, 
  where preconditions are defined in separate specifications (just as 
  application types and transport methods are).</LI>
  <LI>Defined a new Jingle action of security-info.</LI>
  <LI>Incremented the namespace to urn:xmpp:jingle:1 in order to reflect the 
  addition of security preconditions and the security-info action.</LI>
  <LI>Clarified a number of points about the overall session flow and state 
  machine.</LI>
  <LI>Added Jingle reasons for failed-application, failed-transport, and 
  incompatible-parameters.</LI></UL>(psa) </DIV>
<H4>Version 0.34 (2009-02-17)</H4>
<DIV class=indent>
<P>Clarified the definitions and conformance requirements for datagram and 
streaming transports; tightened the security requirements regarding the 
initiator and responder attributes; updated examples to reflect changes to 
XEP-0176.</P>(psa) </DIV>
<H4>Version 0.33 (2008-12-18)</H4>
<DIV class=indent>
<UL>
  <LI>Clarified handling of session timeouts.</LI>
  <LI>Added description-info action.</LI>
  <LI>Added cancel, expired, gone, security-error, and timeout reason 
  conditions.</LI>
  <LI>Changed XMPP error condition for Jingle &lt;unknown-session/&gt; condition 
  from &lt;bad-request/&gt; to &lt;item-not-found/&gt;.</LI>
  <LI>Changed XMPP error condition for Jingle tie breaks from 
  &lt;unexpected-request/&gt; to &lt;conflict/&gt; and defined Jingle-specific 
  condition of &lt;tie-break/&gt;.</LI>
  <LI>Corrected schema.</LI></UL>(psa) </DIV>
<H4>Version 0.32 (2008-10-07)</H4>
<DIV class=indent>
<P>Added content-reject action to mirror content-accept for replies to 
content-add; also added transport-reject action to mirror transport-accept for 
replies to transport-replace.</P>(psa) </DIV>
<H4>Version 0.31 (2008-09-25)</H4>
<DIV class=indent>
<P>Added disposition attribute to content element for mapping to SIP 
Content-Disposition header.</P>(psa) </DIV>
<H4>Version 0.30 (2008-09-23)</H4>
<DIV class=indent>
<UL>
  <LI>Allowed content-add in PENDING state.</LI>
  <LI>Clarified that session-accept action accepts only the content 
  definition(s) in the session-initiate.</LI>
  <LI>Added optional thread element.</LI>
  <LI>Clarified tie breaks for transport-replace.</LI>
  <LI>Modified namespaces to incorporate namespace versioning.</LI>
  <LI>Cleaned up XML schemas.</LI></UL>(ram/psa) </DIV>
<H4>Version 0.29 (2008-07-31)</H4>
<DIV class=indent>
<UL>
  <LI>Changed "reliable" vs. "lossy" to "streaming" vs. "datagram", since 
  reliability or dependability is orthogonal to the streaming nature of the 
  transport.</LI>
  <LI>Deleted the "content-remove" action.</LI>
  <LI>Added "transport-replace" action (answered by "transport-accept").</LI>
  <LI>Removed &lt;condition/&gt; element as container for Jingle condition 
  elements inside &lt;reason/&gt;, since it introduced an unnecessary layer of 
  indirection.</LI>
  <LI>Modified state machine to allow content removal during PENDING state.</LI>
  <LI>Noted that a session can have more than one content instance of the same 
  type.</LI>
  <LI>Noted that the 'name' attribute is unique to a creator.</LI>
  <LI>Changed examples to once again use voice chat instead of file 
  transfer.</LI></UL>(psa/ram) </DIV>
<H4>Version 0.28 (2008-06-16)</H4>
<DIV class=indent>
<P>Modified state machine to allow content-replace during PENDING state for more 
seamless handling of fallback scenarios.</P>(psa) </DIV>
<H4>Version 0.27 (2008-06-04)</H4>
<DIV class=indent>
<P>Updated examples to track changes to XEP-0167 and retraction of XEP-0180; 
corrected definition of name attribute to allow semantic meaning.</P>(psa) 
</DIV>
<H4>Version 0.26 (2008-05-28)</H4>
<DIV class=indent>
<P>Corrected several errors in the state diagrams.</P>(psa) </DIV>
<H4>Version 0.25 (2008-02-29)</H4>
<DIV class=indent>
<P>More clearly specified the content-replace action (essentially similar to 
content-add); specified that content-accept shall be sent in response to 
content-replace; removed content-modify and content-accept from PENDING state; 
adjusted text regarding initial session negotiation.</P>(psa) </DIV>
<H4>Version 0.24 (2008-02-28)</H4>
<DIV class=indent>
<P>Added content-replace action; modified reasoncode and reasontext to use 
elements instead of attributes; added sid element to handle alternative-session 
condition; modified examples to use file transfer instead of voice chat; moved 
profile element to XEP-0167 and XEP-0180.</P>(ram/psa) </DIV>
<H4>Version 0.23 (2008-01-11)</H4>
<DIV class=indent>
<P>Removed content-accept after content-remove; removed errors for 
unsupported-content and unsupported-transports since they are handled via 
session-terminate; clarified handling of responder attribute.</P>(psa) </DIV>
<H4>Version 0.22 (2007-12-06)</H4>
<DIV class=indent>
<P>Modified session flows for busy, unsupported application formats, and 
unsupported transport methods to enable separation between Jingle core and 
distinct modules for applications and transports; moved resource determination 
recommendations to XEP-208.</P>(psa) </DIV>
<H4>Version 0.21 (2007-11-27)</H4>
<DIV class=indent>
<P>Further editorial review.</P>(psa) </DIV>
<H4>Version 0.20 (2007-11-15)</H4>
<DIV class=indent>
<P>Editorial review and consistency check; moved voice chat scenarios to 
XEP-0167.</P>(psa) </DIV>
<H4>Version 0.19 (2007-11-13)</H4>
<DIV class=indent>
<P>Added scenario for handling of busy state, including Jingle-specific error 
code and modified error flow (no longer an instance of decline).</P>(psa) </DIV>
<H4>Version 0.18 (2007-11-08)</H4>
<DIV class=indent>
<P>Added scenarios for various session flows; clarified handling of content-add, 
content-modify, and content-remove actions; clarified rules for codec 
priority.</P>(psa) </DIV>
<H4>Version 0.17 (2007-06-20)</H4>
<DIV class=indent>
<P>Added &lt;unsupported-info/&gt; error.</P>(psa) </DIV>
<H4>Version 0.16 (2007-06-06)</H4>
<DIV class=indent>
<P>Clarified resource determination process and updated text to reflect 
modifications to XEP-0168.</P>(psa) </DIV>
<H4>Version 0.15 (2007-05-25)</H4>
<DIV class=indent>
<P>Rewrote introduction and moved historical text to separate section.</P>(psa) 
</DIV>
<H4>Version 0.14 (2007-04-17)</H4>
<DIV class=indent>
<P>Clarified session lifetime; defined reason attribute and associated registry; 
further specified conformance requirements.</P>(psa) </DIV>
<H4>Version 0.13 (2007-03-23)</H4>
<DIV class=indent>
<P>Simplified signalling process and state chart; Removed session-redirect 
action (use redirect error instead); removed content-decline action; removed 
transport-* actions (except transport-info for ICE negotiation); removed 
description-* actions; simplified syntax to allow only one transport per content 
type; corrected syntax of creator attribute to be either initiator or responder 
(not JIDs); added profile attribute to content element in order to specify RTP 
profile in use.</P>(psa/ram) </DIV>
<H4>Version 0.12 (2006-12-21)</H4>
<DIV class=indent>
<P>Added creator attribute to content element for prevention of race condition; 
modified spec to use provisional namespace before advancement to Draft (per 
XEP-0053).</P>(psa/ram) </DIV>
<H4>Version 0.11 (2006-10-31)</H4>
<DIV class=indent>
<P>Completed clarifications and corrections throughout; added section on Jingle 
Actions.</P>(psa) </DIV>
<H4>Version 0.10 (2006-09-29)</H4>
<DIV class=indent>
<P>Made several corrections to the state machines and examples.</P>(ram/psa) 
</DIV>
<H4>Version 0.9 (2006-09-08)</H4>
<DIV class=indent>
<P>Further cleaned up state machines and state-related actions.</P>(ram/psa) 
</DIV>
<H4>Version 0.8 (2006-08-23)</H4>
<DIV class=indent>
<P>Changed channels to components in line with ICE; changed various action names 
for consistency; added session-extend and session-reduce actions to add and 
remove description/transport pairs; added description-modify action; added 
sender attribute to specify directionality.</P>(ram/psa) </DIV>
<H4>Version 0.7 (2006-07-17)</H4>
<DIV class=indent>
<P>Added implementation note about handling multiple content types.</P>(psa) 
</DIV>
<H4>Version 0.6 (2006-07-12)</H4>
<DIV class=indent>
<P>Changed media type to content type.</P>(se/psa) </DIV>
<H4>Version 0.5 (2006-03-20)</H4>
<DIV class=indent>
<P>Further clarified state machine diagrams; specified that session accept must 
include agreed-upon media format and transport description; moved deployment 
notes to appropriate transport spec.</P>(psa/jb) </DIV>
<H4>Version 0.4 (2006-03-01)</H4>
<DIV class=indent>
<P>Added glossary; clarified state machines; updated to reflect publication of 
XEP-0176 and XEP-0177.</P>(psa/jb) </DIV>
<H4>Version 0.3 (2006-02-24)</H4>
<DIV class=indent>
<P>Provided more detail about modify scenarios; defined media-specific and 
transport-specific actions and adjusted state machine accordingly.</P>(psa/jb) 
</DIV>
<H4>Version 0.2 (2006-02-13)</H4>
<DIV class=indent>
<P>Per agreement among the co-authors, moved transport definition to separate 
specification, simplified state machine, and made other associated changes to 
the text, examples, and schemas; also harmonized redirect, decline, and 
terminate processes.</P>(psa/jb) </DIV>
<H4>Version 0.1 (2005-12-15)</H4>
<DIV class=indent>
<P>Initial version.</P>(psa) </DIV>
<H4>Version 0.0.10 (2005-12-11)</H4>
<DIV class=indent>
<P>More fully documented burst mode, connectivity checks, error cases, 
etc.</P>(psa) </DIV>
<H4>Version 0.0.9 (2005-12-08)</H4>
<DIV class=indent>
<P>Restructured document flow; provided example of burst mode.</P>(psa) </DIV>
<H4>Version 0.0.8 (2005-12-05)</H4>
<DIV class=indent>
<P>Distinguished between dribble mode and burst mode, including mode attribute, 
service discovery features, and implementation notes; provided detailed resource 
discovery examples; corrected state chart; specified session termination; 
specified error conditions; specified semantics of informational messages; began 
to define security considerations; added Joe Beda as co-author.</P>(psa/sl/jb) 
</DIV>
<H4>Version 0.0.7 (2005-11-08)</H4>
<DIV class=indent>
<P>Added more detail to basic session flow; harmonized candidate negotiation 
process with ICE.</P>(psa) </DIV>
<H4>Version 0.0.6 (2005-10-27)</H4>
<DIV class=indent>
<P>Added XMPP Registrar considerations; defined schema; completed slight syntax 
cleanup.</P>(psa) </DIV>
<H4>Version 0.0.5 (2005-10-21)</H4>
<DIV class=indent>
<P>Separated method description formats from signalling protocol.</P>(psa/sl) 
</DIV>
<H4>Version 0.0.4 (2005-10-19)</H4>
<DIV class=indent>
<P>Harmonized basic session flow with Google Talk protocol; added Scott Ludwig 
as co-author.</P>(psa/sl) </DIV>
<H4>Version 0.0.3 (2005-10-10)</H4>
<DIV class=indent>
<P>Added more detail to basic session flow.</P>(psa) </DIV>
<H4>Version 0.0.2 (2005-10-07)</H4>
<DIV class=indent>
<P>Protocol cleanup.</P>(psa/jjh) </DIV>
<H4>Version 0.0.1 (2005-10-06)</H4>
<DIV class=indent>
<P>First draft.</P>(psa/jjh) </DIV></DIV>
<HR>

<P>END</P></BODY></HTML>
